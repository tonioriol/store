/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.1 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */

var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var r;for(r=0;r<e.length&&(!e[r]||!t(e[r],r,e));r+=1);}}function eachReverse(e,t){if(e){var r;for(r=e.length-1;r>-1&&(!e[r]||!t(e[r],r,e));r-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var r;for(r in e)if(hasProp(e,r)&&t(e[r],r))break}function mixin(e,t,r,n){return t&&eachProp(t,function(t,o){!r&&hasProp(e,o)||(!n||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[o]=t:(e[o]||(e[o]={}),mixin(e[o],t,r,n)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,r,n){var o=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return o.requireType=e,o.requireModules=n,r&&(o.originalError=r),o}function newContext(e){function t(e){var t,r;for(t=0;t<e.length;t++)if(r=e[t],"."===r)e.splice(t,1),t-=1;else if(".."===r){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function r(e,r,n){var o,i,a,s,u,c,f,l,d,p,h,g,y=r&&r.split("/"),m=w.map,v=m&&m["*"];if(e&&(e=e.split("/"),f=e.length-1,w.nodeIdCompat&&jsSuffixRegExp.test(e[f])&&(e[f]=e[f].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&y&&(g=y.slice(0,y.length-1),e=g.concat(e)),t(e),e=e.join("/")),n&&m&&(y||v)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(c=a.slice(0,s).join("/"),y)for(u=y.length;u>0;u-=1)if(i=getOwn(m,y.slice(0,u).join("/")),i&&(i=getOwn(i,c))){l=i,d=s;break e}!p&&v&&getOwn(v,c)&&(p=getOwn(v,c),h=s)}!l&&p&&(l=p,d=h),l&&(a.splice(0,d,l),e=a.join("/"))}return o=getOwn(w.pkgs,e),o?o:e}function n(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===b.contextName)return t.parentNode.removeChild(t),!0})}function o(e){var t=getOwn(w.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),b.require.undef(e),b.makeRequire(null,{skipMap:!0})([e]),!0}function i(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function a(e,t,n,o){var a,s,u,c,f=null,l=t?t.name:null,d=e,p=!0,h="";return e||(p=!1,e="_@r"+(A+=1)),c=i(e),f=c[0],e=c[1],f&&(f=r(f,l,o),s=getOwn(C,f)),e&&(f?h=s&&s.normalize?s.normalize(e,function(e){return r(e,l,o)}):e.indexOf("!")===-1?r(e,l,o):e:(h=r(e,l,o),c=i(h),f=c[0],h=c[1],n=!0,a=b.nameToUrl(h))),u=!f||s||n?"":"_unnormalized"+(O+=1),{prefix:f,name:h,parentMap:t,unnormalized:!!u,url:a,originalName:d,isDefine:p,id:(f?f+"!"+h:h)+u}}function s(e){var t=e.id,r=getOwn(x,t);return r||(r=x[t]=new b.Module(e)),r}function u(e,t,r){var n=e.id,o=getOwn(x,n);!hasProp(C,n)||o&&!o.defineEmitComplete?(o=s(e),o.error&&"error"===t?r(o.error):o.on(t,r)):"defined"===t&&r(C[n])}function c(e,t){var r=e.requireModules,n=!1;t?t(e):(each(r,function(t){var r=getOwn(x,t);r&&(r.error=e,r.events.error&&(n=!0,r.emit("error",e)))}),n||req.onError(e))}function f(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(b.defQueueMap[t]=!0),S.push(e)}),globalDefQueue=[])}function l(e){delete x[e],delete I[e]}function d(e,t,r){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,each(e.depMaps,function(n,o){var i=n.id,a=getOwn(x,i);!a||e.depMatched[o]||r[i]||(getOwn(t,i)?(e.defineDep(o,C[i]),e.check()):d(a,t,r))}),r[n]=!0)}function p(){var e,t,r=1e3*w.waitSeconds,i=r&&b.startTime+r<(new Date).getTime(),a=[],s=[],u=!1,f=!0;if(!v){if(v=!0,eachProp(I,function(e){var r=e.map,c=r.id;if(e.enabled&&(r.isDefine||s.push(e),!e.error))if(!e.inited&&i)o(c)?(t=!0,u=!0):(a.push(c),n(c));else if(!e.inited&&e.fetched&&r.isDefine&&(u=!0,!r.prefix))return f=!1}),i&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=b.contextName,c(e);f&&each(s,function(e){d(e,{},{})}),i&&!t||!u||!isBrowser&&!isWebWorker||R||(R=setTimeout(function(){R=0,p()},50)),v=!1}}function h(e){hasProp(C,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function g(e,t,r,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(r,t,!1)}function y(e){var t=e.currentTarget||e.srcElement;return g(t,b.onScriptLoad,"load","onreadystatechange"),g(t,b.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function m(){var e;for(f();S.length;){if(e=S.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}b.defQueueMap={}}var v,_,b,E,R,w={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},x={},I={},T={},S=[],C={},j={},U={},A=1,O=1;return E={require:function(e){return e.require?e.require:e.require=b.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?C[e.map.id]=e.exports:e.exports=C[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(w.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},_=function(e){this.events=getOwn(T,e.id)||{},this.map=e,this.shim=getOwn(w.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},_.prototype={init:function(e,t,r,n){n=n||{},this.inited||(this.factory=t,r?this.on("error",r):this.events.error&&(r=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=r,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var e=this.map;return this.shim?void b.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;j[e]||(j[e]=!0,b.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,r=this.map.id,n=this.depExports,o=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(i)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=b.execCb(r,i,n,o)}catch(t){e=t}else o=b.execCb(r,i,n,o);if(this.map.isDefine&&void 0===o&&(t=this.module,t?o=t.exports:this.usingExports&&(o=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else o=i;if(this.exports=o,this.map.isDefine&&!this.ignore&&(C[r]=o,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(b,this.map,a)}l(r),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(b.defQueueMap,r)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=a(e.prefix);this.depMaps.push(n),u(n,"defined",bind(this,function(n){var o,i,f,d=getOwn(U,this.map.id),p=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,g=b.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(p=n.normalize(p,function(e){return r(e,h,!0)})||""),i=a(e.prefix+"!"+p,this.map.parentMap),u(i,"defined",bind(this,function(e){this.map.normalizedMap=i,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),f=getOwn(x,i.id),void(f&&(this.depMaps.push(i),this.events.error&&f.on("error",bind(this,function(e){this.emit("error",e)})),f.enable()))):d?(this.map.url=b.nameToUrl(d),void this.load()):(o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),o.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(x,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&l(e.map.id)}),c(e)}),o.fromText=bind(this,function(r,n){var i=e.name,u=a(i),f=useInteractive;n&&(r=n),f&&(useInteractive=!1),s(u),hasProp(w.config,t)&&(w.config[i]=w.config[t]);try{req.exec(r)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}f&&(useInteractive=!0),this.depMaps.push(u),b.completeLoad(i),g([i],o)}),void n.load(e.name,g,o,w))})),b.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){I[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var r,n,o;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(E,e.id))return void(this.depExports[t]=o(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}r=e.id,n=x[r],hasProp(E,r)||!n||n.enabled||b.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(x,e.id);t&&!t.enabled&&b.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var r=this.events[e];r||(r=this.events[e]=[]),r.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},b={config:w,contextName:e,registry:x,defined:C,urlFetched:j,defQueue:S,defQueueMap:{},Module:_,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,r){return(r.indexOf("?")===-1?"?":"&")+t}}var r=w.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(w[t]||(w[t]={}),mixin(w[t],e,!0,!0)):w[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(U[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=b.makeShimExports(e)),r[t]=e}),w.shim=r),e.packages&&each(e.packages,function(e){var t,r;e="string"==typeof e?{name:e}:e,r=e.name,t=e.location,t&&(w.paths[r]=e.location),w.pkgs[r]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(x,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&b.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,o){function i(r,n,u){var f,l,d;return o.enableBuildCallback&&n&&isFunction(n)&&(n.__requireJsBuild=!0),"string"==typeof r?isFunction(n)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(E,r)?E[r](x[t.id]):req.get?req.get(b,r,t,i):(l=a(r,t,!1,!0),f=l.id,hasProp(C,f)?C[f]:c(makeError("notloaded",'Module name "'+f+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(m(),b.nextTick(function(){m(),d=s(a(null,t)),d.skipMap=o.skipMap,d.init(r,n,u,{enabled:!0}),p()}),i)}return o=o||{},mixin(i,{isBrowser:isBrowser,toUrl:function(e){var n,o=e.lastIndexOf("."),i=e.split("/")[0],a="."===i||".."===i;return o!==-1&&(!a||o>1)&&(n=e.substring(o,e.length),e=e.substring(0,o)),b.nameToUrl(r(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(C,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(C,e)||hasProp(x,e)}}),t||(i.undef=function(e){f();var r=a(e,t,!0),o=getOwn(x,e);o.undefed=!0,n(e),delete C[e],delete j[r.url],delete T[e],eachReverse(S,function(t,r){t[0]===e&&S.splice(r,1)}),delete b.defQueueMap[e],o&&(o.events.defined&&(T[e]=o.events),l(e))}),i},enable:function(e){var t=getOwn(x,e.id);t&&s(e).enable()},completeLoad:function(e){var t,r,n,i=getOwn(w.shim,e)||{},a=i.exports;for(f();S.length;){if(r=S.shift(),null===r[0]){if(r[0]=e,t)break;t=!0}else r[0]===e&&(t=!0);h(r)}if(b.defQueueMap={},n=getOwn(x,e),!t&&!hasProp(C,e)&&n&&!n.inited){if(!(!w.enforceDefine||a&&getGlobal(a)))return o(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));h([e,i.deps||[],i.exportsFn])}p()},nameToUrl:function(e,t,r){var n,o,i,a,s,u,c,f=getOwn(w.pkgs,e);if(f&&(e=f),c=getOwn(U,e))return b.nameToUrl(c,t,r);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(n=w.paths,o=e.split("/"),i=o.length;i>0;i-=1)if(a=o.slice(0,i).join("/"),u=getOwn(n,a)){isArray(u)&&(u=u[0]),o.splice(0,i,u);break}s=o.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||r?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":w.baseUrl)+s}return w.urlArgs&&!/^blob\:/.test(s)?s+w.urlArgs(e,s):s},load:function(e,t){req.load(b,e,t)},execCb:function(e,t,r,n){return t.apply(n,r)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=y(e);b.completeLoad(t.id)}},onScriptError:function(e){var t=y(e);if(!o(t.id)){var r=[];return eachProp(x,function(e,n){0!==n.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return r.push(n),!0})}),c(makeError("scripterror",'Script error for "'+t.id+(r.length?'", needed by: '+r.join(", "):'"'),e,[t.id]))}}},b.require=b.makeRequire(),b}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.1",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,r,n){var o,i,a=defContextName;return isArray(e)||"string"==typeof e||(i=e,isArray(t)?(e=t,t=r,r=n):e=[]),i&&i.context&&(a=i.context),o=getOwn(contexts,a),o||(o=contexts[a]=req.s.newContext(a)),i&&o.configure(i),o.require(e,t,r)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,r){var n=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return n.type=e.scriptType||"text/javascript",n.charset="utf-8",n.async=!0,n},req.load=function(e,t,r){var n,o=e&&e.config||{};if(isBrowser)return n=req.createNode(o,t,r),n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=r,o.onNodeCreated&&o.onNodeCreated(n,o,t,r),currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),e.completeLoad(t)}catch(n){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+r,n,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||mainScript.indexOf("!")!==-1||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,r){var n,o;"string"!=typeof e&&(r=t,t=e,e=null),isArray(t)||(r=t,t=null),!t&&isFunction(r)&&(t=[],r.length&&(r.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,r){t.push(r)}),t=(1===r.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript(),n&&(e||(e=n.getAttribute("data-requiremodule")),o=contexts[n.getAttribute("data-requirecontext")])),o?(o.defQueue.push([e,t,r]),o.defQueueMap[e]=!0):globalDefQueue.push([e,t,r])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,setTimeout),define("dojo/has",["require","module"],function(e,t){var r=e.has||function(){};if(!r("dojo-has-api")){var n="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,o=function(){return this}(),i=n&&document,a=i&&i.createElement("DiV"),s=t.config&&t.config()||{};r=function(e){return"function"==typeof s[e]?s[e]=s[e](o,i,a):s[e]},r.cache=s,r.add=function(e,t,n,o){return("undefined"==typeof s[e]||o)&&(s[e]=t),n&&r(e)},r.add("host-browser",n),r.add("host-node","object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8),r.add("host-rhino","function"==typeof load&&("function"==typeof Packages||"object"==typeof Packages)),r.add("dom",n),r.add("dojo-dom-ready-api",1),r.add("dojo-sniff",1)}if(r("host-browser")){r.add("dom-addeventlistener",!!document.addEventListener),r.add("touch","ontouchstart"in document||"onpointerdown"in document&&navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints),r.add("touch-events","ontouchstart"in document),r.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),r.add("MSPointer",window.navigator.msPointerEnabled),r.add("touch-action",r("touch")&&r("pointer-events")),r.add("device-width",screen.availWidth||innerWidth);var u=document.createElement("form");r.add("dom-attributes-explicit",0==u.attributes.length),r.add("dom-attributes-specified-flag",u.attributes.length>0&&u.attributes.length<40)}return r.clearElement=function(e){return e.innerHTML="",e},r.normalize=function(e,t){var n=e.match(/[\?:]|[^:\?]*/g),o=0,i=function(e){var t=n[o++];return":"==t?0:"?"==n[o++]?!e&&r(t)?i():(i(!0),i(e)):t||0};return e=i(),e&&t(e)},r.load=function(e,t,r){e?t([e],r):r()},r}),define("dojo/_base/config",["../has","require"],function(e,t){var r={};if(e("dojo-config-api")){var n,o=t.rawConfig;for(n in o)r[n]=o[n]}else{var i=function(t,r,o){for(n in t)"has"!=n&&e.add(r+n,t[n],0,o)},a=function(){return this}();r=e("dojo-loader")?t.rawConfig:a.dojoConfig||a.djConfig||{},i(r,"config",1),i(r.has,"",1)}if(!r.locale&&"undefined"!=typeof navigator){var s=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage;s&&(r.locale=s.toLowerCase())}return r}),define("dojo/_base/kernel",["../has","./config","require","module"],function(e,t,r,n){var o,i,a,s=function(){return this}(),u={},c={},f={config:t,global:s,dijit:u,dojox:c},l={dojo:["dojo",f],dijit:["dijit",u],dojox:["dojox",c]},d=r.map&&r.map[n.id.match(/[^\/]+/)[0]];for(i in d)l[i]?l[i][0]=d[i]:l[i]=[d[i],{}];for(i in l)a=l[i],a[1]._scopeName=a[0],t.noGlobals||(s[a[0]]=a[1]);f.scopeMap=l,f.baseUrl=f.config.baseUrl=r.baseUrl,f.isAsync=!e("dojo-loader")||r.async,f.locale=t.locale;var p="$Rev: 594ed6f $".match(/[0-9a-f]{7,}/);if(f.version={major:1,minor:12,patch:2,flag:"",revision:p?p[0]:NaN,toString:function(){var e=f.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},e.add("extend-dojo",1),e("csp-restrictions")||Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(f),e("host-rhino")?f.exit=function(e){quit(e)}:f.exit=function(){},e("host-webworker")||e.add("dojo-guarantee-console",1),e("dojo-guarantee-console")){e.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"==typeof console.log}),"undefined"!=typeof console||(console={});var h,g=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(o=0;h=g[o++];)console[h]?e("console-as-object")&&(console[h]=Function.prototype.bind.call(console[h],console)):!function(){var e=h+"";console[e]="log"in console?function(){var t=Array.prototype.slice.call(arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}()}if(e.add("dojo-debug-messages",!!t.isDebug),f.deprecated=f.experimental=function(){},e("dojo-debug-messages")&&(f.deprecated=function(e,t,r){var n="DEPRECATED: "+e;t&&(n+=" "+t),r&&(n+=" -- will be removed in version: "+r),console.warn(n)},f.experimental=function(e,t){var r="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(r+=" "+t),console.warn(r)}),e.add("dojo-modulePaths",1),e("dojo-modulePaths")&&t.modulePaths){f.deprecated("dojo.modulePaths","use paths configuration");var y={};for(i in t.modulePaths)y[i.replace(/\./g,"/")]=t.modulePaths[i];r({paths:y})}return e.add("dojo-moduleUrl",1),e("dojo-moduleUrl")&&(f.moduleUrl=function(e,t){f.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var n=null;return e&&(n=r.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),n}),f._hasResource={},f}),define("dojo/sniff",["./has"],function(e){if(e("host-browser")){var t=navigator,r=t.userAgent,n=t.appVersion,o=parseFloat(n);if(e.add("air",r.indexOf("AdobeAIR")>=0),e.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),e.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),e.add("khtml",n.indexOf("Konqueror")>=0?o:void 0),e.add("edge",parseFloat(r.split("Edge/")[1])||void 0),e.add("opr",parseFloat(r.split("OPR/")[1])||void 0),e.add("webkit",!e("wp")&&!e("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),e.add("chrome",!e("edge")&&!e("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),e.add("android",!e("wp")&&parseFloat(r.split("Android ")[1])||void 0),e.add("safari",!(n.indexOf("Safari")>=0)||e("wp")||e("chrome")||e("android")||e("edge")||e("opr")?void 0:parseFloat(n.split("Version/")[1])),e.add("mac",n.indexOf("Macintosh")>=0),e.add("quirks","BackCompat"==document.compatMode),!e("wp")&&r.match(/(iPhone|iPod|iPad)/)){var i=RegExp.$1.replace(/P/,"p"),a=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(a.replace(/_/,".").replace(/_/g,""));e.add(i,s),e.add("ios",s)}if(e.add("bb",(r.indexOf("BlackBerry")>=0||r.indexOf("BB10")>=0)&&parseFloat(r.split("Version/")[1])||void 0),e.add("trident",parseFloat(n.split("Trident/")[1])||void 0),e.add("svg","undefined"!=typeof SVGAngle),!e("webkit")){if(r.indexOf("Opera")>=0&&e.add("opera",o>=9.8?parseFloat(r.split("Version/")[1])||o:o),!(r.indexOf("Gecko")>=0)||e("wp")||e("khtml")||e("trident")||e("edge")||e.add("mozilla",o),e("mozilla")&&e.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0),document.all&&!e("opera")){var u=parseFloat(n.split("MSIE ")[1])||void 0,c=document.documentMode;c&&5!=c&&Math.floor(u)!=c&&(u=c),e.add("ie",u)}e.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return e}),define("dojo/_base/lang",["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var r=t("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],n=r.length,o=function(t,r,n){n||(n=t[0]&&e.scopeMap[t[0]]?e.scopeMap[t.shift()][1]:e.global);try{for(var o=0;o<t.length;o++){var i=t[o];if(!(i in n)){if(!r)return;n[i]={}}n=n[i]}return n}catch(e){}},i=Object.prototype.toString,a=function(e,t,r){return(r||[]).concat(Array.prototype.slice.call(e,t||0))},s=/\{([^\}]+)\}/g,u={_extraNames:r,_mixin:function(e,o,i){var a,s,u,c={};for(a in o)s=o[a],a in e&&(e[a]===s||a in c&&c[a]===s)||(e[a]=i?i(s):s);if(t("bug-for-in-skips-shadowed")&&o)for(u=0;u<n;++u)a=r[u],s=o[a],a in e&&(e[a]===s||a in c&&c[a]===s)||(e[a]=i?i(s):s);return e},mixin:function(e,t){e||(e={});for(var r=1,n=arguments.length;r<n;r++)u._mixin(e,arguments[r]);return e},setObject:function(e,t,r){var n=e.split("."),i=n.pop(),a=o(n,!0,r);return a&&i?a[i]=t:void 0},getObject:function(e,t,r){return e?o(e.split("."),t,r):r},exists:function(e,t){return void 0!==u.getObject(e,!1,t)},isString:function(e){return"string"==typeof e||e instanceof String},isArray:Array.isArray||function(e){return"[object Array]"==i.call(e)},isFunction:function(e){return"[object Function]"===i.call(e)},isObject:function(e){return void 0!==e&&(null===e||"object"==typeof e||u.isArray(e)||u.isFunction(e))},isArrayLike:function(e){return!!e&&!u.isString(e)&&!u.isFunction(e)&&!(e.tagName&&"form"==e.tagName.toLowerCase())&&(u.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!u.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var r=1,n=arguments.length;r<n;r++)u._mixin(e.prototype,arguments[r]);return e},_hitchArgs:function(t,r){var n=u._toArray(arguments,2),o=u.isString(r);return function(){var i=u._toArray(arguments),a=o?(t||e.global)[r]:r;return a&&a.apply(t||this,n.concat(i))}},hitch:function(t,r){if(arguments.length>2)return u._hitchArgs.apply(e,arguments);if(r||(r=t,t=null),u.isString(r)){if(t=t||e.global,!t[r])throw['lang.hitch: scope["',r,'"] is null (scope="',t,'")'].join("");return function(){return t[r].apply(t,arguments||[])}}return t?function(){return r.apply(t,arguments||[])}:r},delegate:function(){function e(){}return function(t,r){e.prototype=t;var n=new e;return e.prototype=null,r&&u._mixin(n,r),n}}(),_toArray:t("ie")?function(){function e(e,t,r){for(var n=r||[],o=t||0;o<e.length;o++)n.push(e[o]);return n}return function(t){return(t.item?e:a).apply(this,arguments)}}():a,partial:function(t){var r=[null];return u.hitch.apply(e,r.concat(u._toArray(arguments)))},clone:function(e){if(!e||"object"!=typeof e||u.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,r,n;if(u.isArray(e))for(t=[],r=0,n=e.length;r<n;++r)r in e&&(t[r]=u.clone(e[r]));else t=e.constructor?new e.constructor:{};return u._mixin(t,e,u.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,r){return e.replace(r||s,u.isFunction(t)?t:function(e,r){return u.getObject(r,!1,t)})}};return t("extend-dojo")&&u.mixin(e,u),u}),define("dojo/json",["./has"],function(has){"use strict";var hasJSON="undefined"!=typeof JSON;if(has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&'{"a":1}'==JSON.stringify({a:0},function(e,t){return t||1})),has("json-stringify"))return JSON;var escapeString=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(e,t,r){function n(e,i,a){t&&(e=t(a,e));var s,u=typeof e;if("number"==u)return isFinite(e)?e+"":"null";if("boolean"==u)return e+"";if(null===e)return"null";if("string"==typeof e)return escapeString(e);if("function"==u||"undefined"==u)return o;if("function"==typeof e.toJSON)return n(e.toJSON(a),i,a);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,r,n){var o=e["getUTC"+r]()+(n?1:0);return o<10?"0"+o:o});if(e.valueOf()!==e)return n(e.valueOf(),i,a);var c=r?i+r:"",f=r?" ":"",l=r?"\n":"";if(e instanceof Array){var d=e.length,p=[];for(a=0;a<d;a++){var h=e[a];s=n(h,c,a),"string"!=typeof s&&(s="null"),p.push(l+c+s)}return"["+p.join(",")+l+i+"]"}var g=[];for(a in e){var y;if(e.hasOwnProperty(a)){if("number"==typeof a)y='"'+a+'"';else{if("string"!=typeof a)continue;y=escapeString(a)}if(s=n(e[a],c,a),"string"!=typeof s)continue;g.push(l+c+y+":"+f+s)}}return"{"+g.join(",")+l+i+"}"}var o;return"string"==typeof t&&(r=t,t=null),n(e,"","")}}}),define("dojo/errors/create",["../_base/lang"],function(e){return function(t,r,n,o){n=n||Error;var i=function(e){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,i);var t,o=Error.call(this,e);for(t in o)o.hasOwnProperty(t)&&(this[t]=o[t]);this.message=e,this.stack=o.stack}else n.apply(this,arguments);r&&r.apply(this,arguments)};return i.prototype=e.delegate(n.prototype,o),i.prototype.name=t,i.prototype.constructor=i,i}}),define("dojo/errors/CancelError",["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel",log:!1})}),define("dojo/promise/Promise",["../_base/lang"],function(e){"use strict";function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,r,n){t()},cancel:function(e,r){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}),define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise"],function(e,t,r,n,o){"use strict";var i=0,a=1,s=2,u="This deferred has already been fulfilled.",c=Object.freeze||function(){},f=function(t,r,n,o,i){e("config-deferredInstrumentation")&&r===s&&h.instrumentRejected&&0===t.length&&h.instrumentRejected(n,!1,o,i);for(var a=0;a<t.length;a++)l(t[a],r,n,o)},l=function(t,r,n,o){var u=t[r],c=t.deferred;if(u)try{var f=u(n);if(r===i)"undefined"!=typeof f&&p(c,r,f);else{if(f&&"function"==typeof f.then)return t.cancel=f.cancel,void f.then(d(c,a),d(c,s),d(c,i));p(c,a,f)}}catch(e){p(c,s,e)}else p(c,r,n);e("config-deferredInstrumentation")&&r===s&&h.instrumentRejected&&h.instrumentRejected(n,!!u,o,c.promise)},d=function(e,t){return function(r){p(e,t,r)}},p=function(e,t,r){if(!e.isCanceled())switch(t){case i:e.progress(r);break;case a:e.resolve(r);break;case s:e.reject(r)}},h=function(t){var o,d,p,g=this.promise=new n,y=this,m=!1,v=[];e("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(y,h),Error.captureStackTrace(g,h)),this.isResolved=g.isResolved=function(){return o===a},this.isRejected=g.isRejected=function(){return o===s},this.isFulfilled=g.isFulfilled=function(){return!!o},this.isCanceled=g.isCanceled=function(){return m},this.progress=function(e,t){if(o){if(t===!0)throw new Error(u);return g}return f(v,i,e,null,y),g},this.resolve=function(e,t){if(o){if(t===!0)throw new Error(u);return g}return f(v,o=a,d=e,null,y),v=null,g};var _=this.reject=function(t,r){if(o){if(r===!0)throw new Error(u);return g}return e("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(p={},_),
f(v,o=s,d=t,p,y),v=null,g};this.then=g.then=function(e,t,r){var n=[r,e,t];return n.cancel=g.cancel,n.deferred=new h(function(e){return n.cancel&&n.cancel(e)}),o&&!v?l(n,o,d,p):v.push(n),n.deferred.promise},this.cancel=g.cancel=function(e,n){if(o){if(n===!0)throw new Error(u)}else{if(t){var i=t(e);e="undefined"==typeof i?e:i}if(m=!0,!o)return"undefined"==typeof e&&(e=new r),_(e),e;if(o===s&&d===e)return e}},c(g)};return h.prototype.toString=function(){return"[object Deferred]"},o&&o(h),h}),define("dojo/_base/array",["./kernel","../has","./lang"],function(e,t,r){function n(e){return s[e]=new Function("item","index","array",e)}function o(e){var t=!e;return function(r,o,i){var a,u=0,c=r&&r.length||0;if(c&&"string"==typeof r&&(r=r.split("")),"string"==typeof o&&(o=s[o]||n(o)),i){for(;u<c;++u)if(a=!o.call(i,r[u],u,r),e^a)return!a}else for(;u<c;++u)if(a=!o(r[u],u,r),e^a)return!a;return t}}function i(e){var t=1,r=0,n=0;return e||(t=r=n=-1),function(o,i,s,c){if(c&&t>0)return u.lastIndexOf(o,i,s);var f,l=o&&o.length||0,d=e?l+n:r;for(s===a?f=e?r:l+n:s<0?(f=l+s,f<0&&(f=r)):f=s>=l?l+n:s,l&&"string"==typeof o&&(o=o.split(""));f!=d;f+=t)if(o[f]==i)return f;return-1}}var a,s={},u={every:o(!1),some:o(!0),indexOf:i(!0),lastIndexOf:i(!1),forEach:function(e,t,r){var o=0,i=e&&e.length||0;if(i&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||n(t)),r)for(;o<i;++o)t.call(r,e[o],o,e);else for(;o<i;++o)t(e[o],o,e)},map:function(e,t,r,o){var i=0,a=e&&e.length||0,u=new(o||Array)(a);if(a&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||n(t)),r)for(;i<a;++i)u[i]=t.call(r,e[i],i,e);else for(;i<a;++i)u[i]=t(e[i],i,e);return u},filter:function(e,t,r){var o,i=0,a=e&&e.length||0,u=[];if(a&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||n(t)),r)for(;i<a;++i)o=e[i],t.call(r,o,i,e)&&u.push(o);else for(;i<a;++i)o=e[i],t(o,i,e)&&u.push(o);return u},clearCache:function(){s={}}};return t("extend-dojo")&&r.mixin(e,u),u}),define("rdfjson/namespaces",["exports"],function(e){var t={ical:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns#",dcterms:"http://purl.org/dc/terms/",skos:"http://www.w3.org/2004/02/skos/core#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",owl:"http://www.w3.org/2002/07/owl#",vs:"http://www.w3.org/2003/06/sw-vocab-status/ns#",foaf:"http://xmlns.com/foaf/0.1/",wot:"http://xmlns.com/wot/0.1/",dc:"http://purl.org/dc/elements/1.1/",xsd:"http://www.w3.org/2001/XMLSchema#",dcat:"http://www.w3.org/ns/dcat#"},r=0,n=function(e,r,n){return t[e]||(t[e]=r),{abbrev:e,ns:r,localname:n,full:r+n,pretty:e+":"+n}};return e.nsify=function(e){for(var o in t)if(0===e.indexOf(t[o]))return n(o,t[o],e.substring(t[o].length));var i=e.lastIndexOf("/"),a=e.lastIndexOf("#");return a>i&&(i=a),r++,n("ns"+r,e.substring(0,i+1),e.substring(i+1))},e.shorten=function(t){return e.nsify(t).pretty},e.expand=function(e){var r=e.split(":");return 2===r.length&&t.hasOwnProperty(r[0])?t[r[0]]+r[1]:e},e.add=function(e,r){if("string"==typeof e)t[e]=r;else if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},e.registry=function(){return t},e}),define("store/Resource",[],function(){var e=function(e,t,r){this._entryURI=e,this._resourceURI=t,this._entryStore=r};return e.prototype.getEntryStore=function(){return this._entryStore},e.prototype.getEntry=function(e){return this._entryStore.getEntry(this._entryURI,{direct:e})},e.prototype.getResourceURI=function(){return this._resourceURI},e.prototype.getEntryURI=function(){return this._entryURI},e.prototype.getId=function(){return this._entryStore.getFactory().getEntryId(this._entryURI)},e.prototype._update=function(e){this._data=e},e.prototype.getSource=function(){return this._data},e}),define("store/List",["dojo/_base/lang","dojo/_base/array","dojo/Deferred","dojo/json","store/Resource"],function(e,t,r,n,o){var i=function(e,t,r){o.apply(this,arguments),this._cache=r.getCache(),this._sortedChildren=[]},a=function(){};return a.prototype=o.prototype,i.prototype=new a,i.prototype.setLimit=function(e){return this._limit=e,this},i.prototype.getLimit=function(){return this._limit||this.getEntryStore().getFactory().getDefaultLimit()},i.prototype.setSort=function(e){return this._clearSortedEntries(),this._sortParams=e,this},i.prototype.getEntries=function(e){var t=this._getEntries(e),n=new r;return null==t?this._forceLoadEntries(e):(n.resolve(t),n.promise)},i.prototype.forEach=function(e,t){var n=0,o=0,i=this.getLimit(),a=this,s=function(t){var u,c,f=t.length;return u=function(e){if(e===!1){var t=new r;return t.resolve(!1),t}return c()},c=function(){if(0===t.length){var n=new r;return n.resolve(!0),n}var i=e(t.pop(),o);return o++,"undefined"!=typeof i&&"function"==typeof i.then?i.then(u):u(i)},c().then(function(e){if(e!==!1&&f===i)return n++,a.getEntries(n).then(s);var t=new r;return t.resolve(o),t})};return this.getEntries(0).then(s)},i.prototype.addEntry=function(t){var r=this;return this.getAllEntryIds().then(e.hitch(this,function(e){return e.push(t.getId()),this.setAllEntryIds(e,"addToList").then(function(){return t.setRefreshNeeded(),r.getEntry()})}))},i.prototype.removeEntry=function(t){return this.getAllEntryIds().then(e.hitch(this,function(e){return e.splice(e.indexOf(t.getId()),1),this.setAllEntryIds(e,"removeFromList").then(function(){t.setRefreshNeeded()})}))},i.prototype.needRefresh=function(){delete this._unsortedChildren,this._sortedChildren=[],delete this._size},i.prototype.getAllEntryIds=function(){var t=new r;return null!=this._unsortedChildren?t.resolve(this._unsortedChildren):this.getEntries().then(e.hitch(this,function(){t.resolve(this._unsortedChildren)})),t.promise},i.prototype.setAllEntryIds=function(t,r){var o=this._entryStore;return o.handleAsync(o.getREST().put(this._resourceURI,n.stringify(t)).then(e.hitch(this,function(){return this.needRefresh(),o.getEntry(this.getEntryURI()).then(function(e){return e.setRefreshNeeded(),e})})),r||"setList")},i.prototype.getSize=function(){return"number"==typeof this._size?this._size:-1},i.prototype._clearSortedEntries=function(){this._sortedChildren=[]},i.prototype._getEntries=function(e,t){if(null==this._size)return null;for(var r,n=this.getLimit(),o=(e||0)*n,i=!1,a=[],s=o;s<o+n&&s<this._size;s++){if(r=this._sortedChildren[s],!r){i=!0;break}var u=this._entryStore.getCache().get(r);if(t!==!1&&(null==u||u.needRefresh())){i=!0;break}a.push(u)}return i?null:a},i.prototype._forceLoadEntries=function(t){var r=this.getLimit(),n=(t||0)*r;return this._entryStore.getEntry(this._entryURI,{forceLoad:!0,offset:n,limit:r,sort:this._sort,asyncContext:"loadListEntries"}).then(e.hitch(this,function(){return this._getEntries(t,!1)}))},i.prototype._update=function(e,r){for(var n=e.offset||0,o=0;o<r.length;o++)this._sortedChildren[n+o]=r[o].getURI();this._size=e.size||r.length,this._unsortedChildren=e.allUnsorted||t.map(r,function(e){return e.getId()})},i}),define("store/SearchList",["store/List"],function(e){var t=function(e,t,r){this._entryStore=e,this._query=t,this._callType=r||"search",this._sortedChildren=[]};return t.prototype.getQuery=function(){return this._query},t.prototype.setLimit=function(e){this._query.limit(e)},t.prototype.getLimit=function(){return this._query.getLimit()||this._entryStore.getFactory().getDefaultLimit()},t.prototype.getSize=e.prototype.getSize,t.prototype.getEntries=e.prototype.getEntries,t.prototype.forEach=e.prototype.forEach,t.prototype._forceLoadEntries=function(e){var t=(e||0)*this.getLimit();this._query.offset(t);var r=this,n=this._entryStore;return n.handleAsync(n.getREST().get(this._query.getQuery(n)).then(function(e){return n.getFactory().extractSearchResults(e,r,n)}),this._callType)},t.prototype._getEntries=e.prototype._getEntries,t.prototype._update=e.prototype._update,t}),define("store/String",["store/Resource"],function(e){var t=function(t,r,n,o){e.apply(this,arguments),this._data=o},r=function(){};return r.prototype=e.prototype,t.prototype=new r,t.prototype.getString=function(){return this._data},t.prototype.setString=function(e){return this._data=e||"",this},t.prototype.commit=function(){var e=this._entryStore;return e.handleAsync(e.getREST().put(this._resourceURI,this._data),"commitString")},t.prototype.getSource=function(){return this._data},t}),define("store/types",{ET_LOCAL:"Local",ET_LINK:"Link",ET_REF:"Reference",ET_LINKREF:"Linkreference",GT_NONE:"None",GT_CONTEXT:"Context",GT_SYSTEMCONTEXT:"Systemcontext",GT_USER:"User",GT_GROUP:"Group",GT_LIST:"List",GT_RESULTLIST:"Resultlist",GT_GRAPH:"Graph",GT_STRING:"String",GT_PIPELINE:"Pipeline",GT_PIPELINERESULT:"PipelineResult",RT_INFORMATIONRESOURCE:"Information",RT_RESOLVABLEINFORMATIONRESOURCE:"Resolvable",RT_NAMEDRESOURCE:"Named",RT_UNKNOWN:"Unknown"}),define("rdfjson/formats/rdfjson/util",[],function(){var e={};return e.isObject=function(t){return void 0!==t&&(null===t||"object"==typeof t||e.isArray(t)||e.isFunction(t))},e.isString=function(e){return"string"==typeof e||e instanceof String},e.isArray=function(e){return e&&(e instanceof Array||"array"==typeof e)},e.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},e.statementEquals=function(t,r){return t.s===r.s&&t.p===r.p&&e.objectEquals(t.o,r.o)},e.add=function(t,r,n,o){if(e.checkForWrongArgs(arguments),void 0===t[r])return t[r]={},t[r][n]=[o],o;if(void 0===t[r][n])return t[r][n]=[o],o;var i,a=t[r][n];for(i=a.length-1;i>=0;i--)if(e.objectEquals(o,a[i]))return a[i];return a.push(o),o},e.remove=function(t,r,n,o){if(e.checkForWrongArgs(arguments),void 0!==t[r]&&void 0!==t[r][n]){var i,a=t[r][n];for(i=a.length-1;i>=0;i--)if(e.objectEquals(o,a[i]))return o=a[i],a.splice(i,1),e.cleanup(t,r,n),o}},e.contains=function(t,r,n,o){if(e.checkForWrongArgs(arguments),void 0!==t[r]&&void 0!==t[r][n]){var i,a=t[r][n];for(i=a.length-1;i>=0;i--)if(e.objectEquals(o,a[i]))return a[i]}},e.cleanup=function(e,t,r){if(0===e[t][r].length){delete e[t][r];var n=!1;for(var o in e[t])if(e[t].hasOwnProperty(o)){n=!0;break}n||delete e[t]}},e.checkForWrongArgs=function(t){if(!e.isObject(t[0]))throw"Graph is not a object.";if(!e.isString(t[1]))throw"Subject is not a string.";if(!e.isString(t[2]))throw"Predicate is not a string.";if(!e.isObject(t[3]))throw"Object is not a object.";if(void 0===t[3].type)throw"Object has no type attribute, must be one of 'uri', 'literal', or 'bnode'";if(void 0===t[3].value)throw"Object has no value attribute corresponding to the lexical value of the object."},e.objectEquals=function(t,r){return t===r||null==t&&t==r||(e.isString(t)?e.isString(r)?t===r:t===r.value:e.isString(r)?t.value===r:t.type===r.type&&t.value===r.value&&t.lang===r.lang&&t.datatype===r.datatype)},e.findDirectOrRDFValue=function(e,t,r){var n=e.find(t,r);if(n.length>0)return"bnode"!=n[0].getType()?n[0].getValue():e.findFirstValue(n[0].getValue(),"http://www.w3.org/1999/02/22-rdf-syntax-ns#value")},e}),define("rdfjson/Statement",["./namespaces"],function(e){var t=function(e,t,r,n,o){this._graph=e,this._s=t,this._p=r,this._o=n,this._o._statement=this,this._asserted=o};return t.prototype.getGraph=function(){return this._graph},t.prototype.setAsserted=function(e){e!=this._asserted&&(e?this._graph.add(this):this._graph.remove(this),this._asserted=e)},t.prototype.isAsserted=function(){return this._asserted},t.prototype.getSubject=function(){return this._s,this._s},t.prototype.isSubjectBlank=function(){return this._sIsBlank!==!0&&this._sIsBlank!==!1&&(this._sIsBlank=this._graph._bnodes[this._s]===!0),this._sIsBlank},t.prototype.setSubject=function(t){t=e.expand(t),this._asserted?(this._graph.remove(this),this._s=t,this._graph.add(this),delete this._sIsBlank):this._s=t},t.prototype.getPredicate=function(){return this._p},t.prototype.setPredicate=function(t){t=e.expand(t),this._asserted?(this._graph.remove(this),this._p=t,this._graph.add(this)):this._p=t},t.prototype.getObject=function(){return this._o},t.prototype.getCleanObject=function(){var e=this._o,t={value:e.value,type:e.type};return e.language&&(t.language=e.language),this._o.datatype&&(t.datatype=e.datatype),t},t.prototype.getType=function(){return this._o.type},t.prototype.setType=function(e){throw"Changing the type of an object is not supported, create a new statement instead."},t.prototype.getValue=function(){return this._o.value},t.prototype.setValue=function(e){e!==this._o.value&&(this._o.value=e,this.isAsserted()&&this._graph.setChanged())},t.prototype.getLanguage=function(){return this._o.lang},t.prototype.setLanguage=function(e){if("literal"!==this._o.type)throw"Cannot set the language for a resource, has to be a literal";this._o.lang!==e&&(this._o.lang=e,this.isAsserted()&&this._graph.setChanged())},t.prototype.getDatatype=function(){return this._o.datatype},t.prototype.setDatatype=function(e){if("literal"!==this._o.type||null!=this._o.lang)throw"Cannot set the datatype for a resource, has to be a literal";this._o.datatype!==e&&(this._o.datatype=e,this.isAsserted()&&this._graph.setChanged())},t}),define("rdfjson/Graph",["./formats/rdfjson/util","./Statement","./namespaces"],function(e,t,r){var n=function(e){return 0===e.length?e:[e[0]]},o=function(t,r,n){return{object:function(e){for(var i=0;i<r.length;i++){var a;if(n)a=r[i].getSubject();else{var s=r[i].getType();if("uri"===s||"bnode"===s)continue;a=r[i].getValue()}var u=t.find(a,e);u.length>0&&o(t,[u[0]])}return o(t,[])},objects:function(e){var i,a=[];if(n===!0)for(i=0;i<r.length;i++)a=a.concat(t.find(r[i].getSubject(),e));else for(i=0;i<r.length;i++){var s=r[i].getType();"uri"!==s&&"bnode"!==s||(a=a.concat(t.find(r[i].getValue(),e)))}return o(t,a)},constr:function(i,a){e.isString(a)&&(a={type:"uri",value:a});for(var s=[],u=0;u<r.length;u++){var c=n?r[u].getSubject():r[u].getValue();t.find(c,i,a).length>0&&s.push(r[u])}return o(t,s,n)},each:function(e,i){if(n===!0)for(var a=0;a<r.length;a++){var s=r[a].getSubject(),u="_:"===s.substring(0,2)?"bnode":"uri";null!=i&&i!==u||e(o(t,r[a],n))}else for(var c=0;c<r.length;c++)e(o(t,r[c],n))},nodes:function(e){var t=[];if(n===!0)for(var o=0;o<r.length;o++){var i=r[o].getSubject(),a="_:"===i.substring(0,2)?"bnode":"uri";null!=e&&e!==a||t.push({type:a,value:r[o].getSubject()})}else for(var s=0;s<r.length;s++)null!=e&&e!==r[s].getType()||t.push(r[s].getObject());return t},values:function(e){var t=[];if(n===!0)for(var o=0;o<r.length;o++){var i=r[o].getSubject(),a="_:"===i.substring(0,2)?"bnode":"uri";null!=e&&e!==a||t.push(r[o].getSubject())}else for(var s=0;s<r.length;s++)null!=e&&e!==r[s].getType()||t.push(r[s].getValue());return t},firstValue:function(e){if(n===!0)for(var t=0;t<r.length;t++){var o=r[t].getSubject(),i="_:"===o.substring(0,2)?"bnode":"uri";if(null==e||e===i)return r[t].getSubject()}else for(var a=0;a<r.length;a++)if(null==e||e===r[a].getType())return r[a].getValue()}}},i=function(e,t){this._graph=e||{},this._bnodes={},this._bnodesIndexed=!1,t!==!1&&this.validate(),this._changed=!1};return i.prototype.isEmpty=function(){var e,t,r,n,o=this._graph;for(e in o)if(o.hasOwnProperty(e))for(t in o[e])if(o[e].hasOwnProperty(t))for(n=o[e][t],r=n.length-1;r>=0;r--){var i=n[r];if(null==i._statement||i._statement.isAsserted())return!1}return!0},i.prototype.onChange=function(){},i.prototype.setChanged=function(e){this._changed=e===!0||null==e,this._changed&&this.onChange()},i.prototype.isChanged=function(){return this._changed},i.prototype.addAll=function(e){for(var t,r={},n=e.find(),o=0;o<n.length;o++){var i=n[o],a=i.getSubject(),s=i.getPredicate(),u=i.getCleanObject();0===a.indexOf("_:")&&(t=r[a]||this._newBNode(),r[a]=t,a=t),0===s.indexOf("_:")&&(t=r[s]||this._newBNode(),r[s]=t,s=t),"bnode"===u.type&&(t=r[u.value]||this._newBNode(),r[u.value]=t,u.value=t),this.add(a,s,u)}},i.prototype.add=function(r,n,o){if(r instanceof t){var n=r.getPredicate(),o=r.getObject(),r=r.getSubject();this._trackBNodes(r,n,o);var i=this._graphObject(o),a=e.add(this._graph,r,n,i);return this.setChanged(),this._get(r,n,a,!0)}return this.create(r,n,o,!0)},i.prototype.addL=function(e,t,r,n){var o={type:"literal",value:r};return"string"==typeof n&&(o.lang=n),this.create(e,t,o,!0)},i.prototype.addD=function(e,t,n,o){var i={type:"literal",value:n};return"string"==typeof o&&(i.datatype=r.expand(o)),this.create(e,t,i,!0)},i.prototype.create=function(n,o,i,a){if(n=null==n?this._newBNode():r.expand(n),o=null==o?this._newBNode():r.expand(o),null==i?i={type:"bnode",value:this._newBNode()}:e.isString(i)?i={type:"uri",value:r.expand(i)}:(i={type:i.type,value:i.value,lang:i.lang,datatype:i.datatype},"uri"===i.type&&null!=i.value&&(i.value=r.expand(i.value)),i.datatype&&(i.datatype=r.expand(i.datatype))),a!==!1){var s=e.add(this._graph,n,o,i);return this.setChanged(),this._getOrCreate(n,o,s,!0)}return new t(this,n,o,i,!1)},i.prototype.findAndRemove=function(e,t,r){for(var n=this.find(e,t,r),o=0;o<n.length;o++)this.remove(n[o])},i.prototype.remove=function(t){var r=t.getSubject(),n=t.getPredicate(),o=t.getObject();this._trackBNodes(r,n,o),null!=e.remove(this._graph,r,n,o)&&this.setChanged()},i.prototype.find=function(t,n,o){if("string"==typeof t&&(t=r.expand(t)),"string"==typeof n&&(n=r.expand(n)),"object"==typeof o&&null!==o&&"uri"===o.type?o.value=r.expand(o.value):"string"==typeof o&&(o={type:"uri",value:r.expand(o)}),null==o)return null==n?null==t?this._find():this._findS(t):null==t?this._findP(n):this._findSP(t,n);if(null==n)return null==t?this._findO(o):this._findSO(t,o);if(null==t)return this._findPO(n,o);var i=this._get(t,n,e.contains(this._graph,t,n,o),!0);return null==i?[]:[i]},i.prototype.findFirstValue=function(e,t){var r=this.find(e,t);if(r.length>0)return r[0].getValue()},i.prototype.projection=function(e,t,r){var n,o={};for(var i in t)if(t.hasOwnProperty(i)){var a=t[i],s=this.find(e,a);if(s.length>0){if("*"===i[0]){n=[];for(var u=0;u<s.length;u++)n[u]=s[u].getValue();o[i.substr(1)]=n}else o[i]=s[0].getValue();if(null!=r&&"none"!==r){switch(r){case"statement":n=s;break;case"objects":n=[];for(var u=0;u<s.length;u++)n[u]=s[u].getCleanObject();break;case"values":n=[];for(var u=0;u<s.length;u++)n[u]=s[u].getValue()}o["*"+i]=n}}}return o},i.prototype.subjects=function(e,t){return o(this,this.find(null,e,t),!0)},i.prototype.subject=function(e,t){return o(this,n(this.find(null,e,t)),!0)},i.prototype.objects=function(e,t){return o(this,this.find(e,t,null))},i.prototype.object=function(e,t){return o(this,n(this.find(e,t,null)))},i.prototype.exportRDFJSON=function(){var e,t,r,n,o,i,a,s=this._graph,u={};for(e in s)if(s.hasOwnProperty(e)){u[e]={};for(t in s[e])if(s[e].hasOwnProperty(t))for(n=s[e][t],o=u[e][t]=[],r=n.length-1;r>=0;r--)i=n[r],a={type:i.type,value:i.value},null!=i.lang&&(a.lang=i.lang),null!=i.datatype&&(a.datatype=i.datatype),o.push(a)}return u},i.prototype.replaceSubject=function(e,t){return this.replaceURI(e,t)},i.prototype.replaceURI=function(e,t){var r=this._graph;if(r.hasOwnProperty(e)){if(r.hasOwnProperty(t))throw"Cannot replace subject with target URI since it already exists.";r[t]=r[e],delete r[e],this._map(function(r,n,o){"uri"===o.type&&o.value===e&&(o.value=t),r===t&&o._statement&&(o._statement._s=t)})}return this},i.prototype.clone=function(){return new i(this.exportRDFJSON())},i.prototype.findProperties=function(e){if(null==this._graph[e])return[];var t,r=this._graph,n=[];for(t in r[e])r[e].hasOwnProperty(t)&&n.push(t);return n},i.prototype.validate=function(){if(this.report=this._validate(),!this.report.valid)throw this.report;return this.report},i.prototype.registerBNode=function(e){this._bnodes[e]=!0},i.prototype._get=function(e,t,r,n){if(null!=r)return this._getOrCreate(e,t,r,n)},i.prototype._getOrCreate=function(e,r,n,o){return null==n._statement&&new t(this,e,r,n,o),n._statement},i.prototype._graphObject=function(e){return null==e._statement||e._statement._graph===this?e:{type:e.type,value:e.value,lang:e.lang,datatype:e.datatype}},i.prototype._findSP=function(e,t){if(null==this._graph[e]||null==this._graph[e][t])return[];for(var r=[],n=this._graph[e][t],o=0;o<n.length;o++)r[o]=this._get(e,t,n[o],!0);return r},i.prototype._findS=function(e){if(null==this._graph[e])return[];var t,r=this._graph,n=[];for(t in r[e])r[e].hasOwnProperty(t)&&n.push(this._findSP(e,t));return Array.prototype.concat.apply([],n)},i.prototype._find=function(){var e=[],t=this;return this._map(function(r,n,o){e.push(t._get(r,n,o,!0))}),e},i.prototype._findP=function(e){var t=[],r=this;return this._map(function(n,o,i){e===o&&t.push(r._get(n,o,i,!0))}),t},i.prototype._findO=function(t){var r=[],n=this;return this._map(function(o,i,a){e.objectEquals(t,a)&&r.push(n._get(o,i,a,!0))}),r},i.prototype._findSO=function(t,r){var n=[],o=this;return this._map(function(i,a,s){t===i&&e.objectEquals(r,s)&&n.push(o._get(i,a,s,!0))}),n},i.prototype._findPO=function(t,r){var n=[],o=this;return this._map(function(i,a,s){t===a&&e.objectEquals(r,s)&&n.push(o._get(i,a,s,!0))}),n},i.prototype._map=function(e){var t,r,n,o,i=this._graph;for(t in i)if(i.hasOwnProperty(t))for(r in i[t])if(i[t].hasOwnProperty(r))for(o=i[t][r],n=o.length-1;n>=0;n--)e(t,r,o[n])},i.prototype._validate=function(){var t,r,n,o,i=this._graph,a={valid:!0,errors:[],nr:0};for(t in i)if(i.hasOwnProperty(t)){if(!e.isObject(i[t])){a.errors.push({s:t,message:"Subject must point to an object."}),a.valid=!1;continue}for(r in i[t])if(i[t].hasOwnProperty(r)){if(o=i[t][r],!e.isArray(o)){a.errors.push({s:t,p:r,message:"Predicate must point to an array of objects."}),a.valid=!1;continue}for(n=o.length-1;n>=0;n--){var s=o[n];e.isObject(s)?null!=s.type?e.isString(s.value)?a.nr++:(a.errors.push({s:t,p:r,oindex:n+1,message:"Object "+(n+1)+" in object array must have the 'value' attribute pointing to a string."}),a.valid=!1):(a.errors.push({s:t,p:r,oindex:n+1,message:"Object "+(n+1)+" in object array lacks the attribute type, must be either 'literal', 'resource' or 'bnode'."}),a.valid=!1):(a.errors.push({s:t,p:r,oindex:n+1,message:"Element "+(n+1)+" in object array is not an object."}),a.valid=!1)}}}return a},i.prototype._newBNode=function(){this._indexBNodes();var e,t,r;for(e=1;e<10;e++)for(t=1;t<=e;t++)if(r="_:"+Math.floor(Math.random()*(Math.pow(10,e)+1)),this._bnodes[r]!==!0)return this._bnodes[r]=!0,r},i.prototype._indexBNodes=function(){if(!this._bnodesIndexed){var e,t,r,n,o=this._graph;for(e in o)if(o.hasOwnProperty(e)){0===e.indexOf("_:")&&(this._bnodes[e]=!0);for(t in o[e])if(o[e].hasOwnProperty(t))for(0===t.indexOf("_:")&&(this._bnodes[t]=!0),n=o[e][t],r=n.length-1;r>=0;r--)"bnode"===n[r].type&&(this._bnodes[n[r].value]=!0)}this._bnodesIndexed=!0}},i.prototype._trackBNodes=function(e,t,r){0===e.indexOf("_:")&&(this._bnodes[e]=!0),0===t.indexOf("_:")&&(this._bnodes[t]=!0),"bnode"===r.type&&(this._bnodes[r.value]=!0)},i}),define("store/Entry",["dojo/_base/array","dojo/_base/lang","rdfjson/Graph","store/types","dojo/Deferred","dojo/json"],function(e,t,r,n,o,i){var a=function(e,t){this._context=e,this._entryInfo=t,this._entryInfo._entry=this};return a.prototype.getEntryStore=function(){return this._context.getEntryStore()},a.prototype.getEntryInfo=function(){return this._entryInfo},a.prototype.getURI=function(){return this._entryInfo.getEntryURI()},a.prototype.getId=function(){return this._entryInfo.getId()},a.prototype.getResourceURI=function(){return this._entryInfo.getResourceURI()},a.prototype.getContext=function(){return this._context},a.prototype.getMetadata=function(){return null==this._metadata&&(this._metadata=new r),this._metadata},a.prototype.setMetadata=function(e){return this._metadata=e,this},a.prototype.commitMetadata=function(){var e=this.getEntryStore(),t=new o,r=this;if(this.isReference())t.reject('Entry "'+this.getURI()+'" is a reference and have no local metadata that can be saved.');else if(this.canWriteMetadata())if(this.needRefresh())t.reject('The entry "'+this.getURI()+'" need to be refreshed before its local metadata can be saved.\nThis message indicates that the client is written poorly, this case should have been taken into account.');else if(null==this._metadata)t.reject('The entry "'+this.getURI()+'" should allow local metadata to be saved, but there is no local metadata.\nThis message is a bug in the storejs API.');else{var n=this.getEntryInfo().getModificationDate();e.getREST().put(this.getEntryInfo().getMetadataURI(),i.stringify(this._metadata.exportRDFJSON()),n).then(function(){r.setRefreshNeeded(!0),r.refresh().then(function(){t.resolve(r)},function(){r.getEntryStore().getCache().message("refreshed",r),t.resolve(r)})},function(e){t.reject(e)})}else t.reject('You do not have sufficient access rights to save metadata on entry "'+this.getURI()+'".');return e.handleAsync(t.promise,"commitMetadata")},a.prototype.add=function(e,t){return this.getMetadata().add(this.getResourceURI(),e,t),this},a.prototype.addL=function(e,t,r){return this.getMetadata().addL(this.getResourceURI(),e,t,r),this},a.prototype.addD=function(e,t,r){return this.getMetadata().addD(this.getResourceURI(),e,t,r),this},a.prototype.getCachedExternalMetadata=function(){return null==this._cachedExternalMetadata&&(this._cachedExternalMetadata=new r),this._cachedExternalMetadata},a.prototype.setCachedExternalMetadata=function(e){return this._cachedExternalMetadata=e||this._cachedExternalMetadata,this},a.prototype.commitCachedExternalMetadata=function(){var e=new o,t=this,r=this.getEntryStore(),n=this.getEntryInfo().getModificationDate();return r.getREST().put(this.getEntryInfo().getCachedExternalMetadataURI(),i.stringify(this._cachedExternalMetadata.exportRDFJSON()),n).then(function(){t.setRefreshNeeded(!0),t.refresh().then(function(){e.resolve(t)},function(){t.getEntryStore().getCache().message("refreshed",t),e.resolve(t)})},function(t){e.reject(t)}),r.handleAsync(e.promise,"commitCachedExternalMetadata")},a.prototype.getExtractedMetadata=function(){return null==this._extractedMetadata&&(this._extractedMetadata=new r),this._extractedMetadata},a.prototype.getResource=function(e){if(e)return this._resource;var r=new o,n=this.getEntryStore();return this._resource?r.resolve(this._resource):n.getREST().get(this.getResourceURI()).then(t.hitch(this,function(e){n.getFactory().updateOrCreateResource(this,{resource:e},!0),r.resolve(this._resource)}),function(e){r.reject(e)}),n.handleAsync(r.promise,"getResource")},a.prototype.getReferrersGraph=function(){return this._relation},a.prototype.getReferrers=function(t){return e.map(this._relation.find(null,t,null),function(e){return e.getSubject()})},a.prototype.getParentLists=function(){var t=this.getReferrers("http://entrystore.org/terms/hasListMember");return e.map(t,function(e){return this.getEntryStore().getFactory().getEntryURIFromURI(this.getEntryStore(),e)},this)},a.prototype.getParentGroups=function(){var t=this.getReferrers("http://entrystore.org/terms/hasGroupMember");return e.map(t,function(e){return this.getEntryStore().getFactory().getEntryURIFromURI(this.getEntryStore(),e)},this)},a.prototype.getComments=function(){return this.getReferrers("http://ontologi.es/like#regarding")},a.prototype.isList=function(){return this.getEntryInfo().getGraphType()===n.GT_LIST},a.prototype.isResultList=function(){return this.getEntryInfo().getGraphType()===n.GT_RESULTLIST},a.prototype.isContext=function(){return this.getEntryInfo().getGraphType()===n.GT_CONTEXT},a.prototype.isSystemContext=function(){return this.getEntryInfo().getGraphType()===n.GT_SYSTEMCONTEXT},a.prototype.isUser=function(){return this.getEntryInfo().getGraphType()===n.GT_USER},a.prototype.isGroup=function(){return this.getEntryInfo().getGraphType()===n.GT_GROUP},a.prototype.isGraph=function(){return this.getEntryInfo().getGraphType()===n.GT_GRAPH},a.prototype.isPipeline=function(){return this.getEntryInfo().getGraphType()===n.GT_PIPELINE},a.prototype.isPipelineResult=function(){return this.getEntryInfo().getGraphType()===n.GT_PIPELINERESULT},a.prototype.isString=function(){return this.getEntryInfo().getGraphType()===n.GT_STRING},a.prototype.isNone=function(){return this.getEntryInfo().getGraphType()===n.GT_NONE},a.prototype.isLink=function(){return this.getEntryInfo().getEntryType()===n.ET_LINK},a.prototype.isReference=function(){return this.getEntryInfo().getEntryType()===n.ET_REF},a.prototype.isLinkReference=function(){return this.getEntryInfo().getEntryType()===n.ET_LINKREF},a.prototype.isExternal=function(){return this.getEntryInfo().getEntryType()!==n.ET_LOCAL},a.prototype.isLocal=function(){return this.getEntryInfo().getEntryType()===n.ET_LOCAL},a.prototype.isLinkToEntry=function(){var e=this.getEntryStore().getBaseURI();return this.isExternal()&&this.getResourceURI().substr(0,e.length)===e},a.prototype.getLinkedEntry=function(){if(this.isLinkToEntry()){var e=this.getEntryStore(),t=this.getResourceURI(),r=e.getEntryId(t),n=e.getContextId(t);return t=e.getEntryURI(n,r),e.handleAsync(this.getEntryStore().getEntry(t),"getLinkedEntry")}},a.prototype.isInformationResource=function(){return this.getEntryInfo().getResourceType()===n.RT_INFORMATIONRESOURCE},a.prototype.isNamedResource=function(){return this.getEntryInfo().getResourceType()===n.RT_NAMEDRESOURCE},a.prototype.canAdministerEntry=function(){return this._rights.administer||!1},a.prototype.canReadResource=function(){return this._rights.administer||this._rights.readresource||this._rights.writeresource||!1},a.prototype.canWriteResource=function(){return this._rights.administer||this._rights.writeresource||!1},a.prototype.canReadMetadata=function(){return this._rights.administer||this._rights.readmetadata||this._rights.writemetadata||!1},a.prototype.canWriteMetadata=function(){return this._rights.administer||this._rights.writemetadata||!1},a.prototype.isPublic=function(){var t=this.getEntryStore().getResourceURI("_principals","_guest"),r=this.getEntryInfo().getACL();if(r.contextOverride)return e.some(["rwrite","rread","mwrite","mread"],function(n){return e.indexOf(r[n],t)!=-1});var n=this.getContext().getEntry(!0);return null!=n?(r=n.getEntryInfo().getACL(),e.some(["rwrite","rread"],function(n){return e.indexOf(r[n],t)!=-1})):void 0},a.prototype.isPrivateTo=function(e){var t=e.getResourceURI(),r=this.getEntryInfo().getACL(),n=this.getContext().getEntry(!0);if(null!=n){var o=n.getEntryInfo().getACL();return 1===o.admin.length&&r.admin[0]===t&&(!r.contextOverride||1===r.admin.length&&r.admin[0]===t)}},a.prototype.del=function(e){var t=this.getEntryStore();return e===!0?t.handleAsync(t.getREST().del(this.getURI()+"?recursive=true"),"delEntry"):t.handleAsync(t.getREST().del(this.getURI()),"delEntry")},a.prototype.setRefreshNeeded=function(e){this.getEntryStore().getCache().setRefreshNeeded(this,e)},a.prototype.needRefresh=function(){return this.getEntryStore().getCache().needRefresh(this)},a.prototype.refresh=function(e,t){var r=new o,n=this.getEntryStore();if(t===!0||n.getCache().needRefresh(this)){var i=this,a=this.getURI(),s=this.getEntryStore().getFactory();n.getREST().get(s.getEntryLoadURI(a)).then(function(t){s.update(i,t),n.getCache().cache(i,e),r.resolve(i)},function(e){r.reject(e)})}else r.resolve(this);return n.handleAsync(r.promise,"refresh")},a}),define("store/terms",["store/types","rdfjson/namespaces"],function(e,t){var r=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t},n="http://entrystore.org/terms/",o="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#";t.add("prov","http://www.w3.org/ns/prov#");var a={homeContext:n+"homeContext",resource:n+"resource",metadata:n+"metadata",externalMetadata:n+"externalMetadata",status:{property:n+"status",Pending:n+"Pending",Succeeded:n+"Success",Failed:n+"Failed"},rdf:{type:o+"type"},pipeline:{pipeline:n+"pipeline",pipelineData:n+"pipelineData",transform:n+"transform",transformPriority:n+"transformPriority",transformType:n+"transformType",transformArgument:n+"transformArgument",transformArgumentKey:n+"transformArgumentKey",transformArgumentValue:n+"transformArgumentValue",transformDestination:n+"transformDestination",transformDetectDestination:n+"transformDetectDestination"
},acl:{read:n+"read",write:n+"write"},xsd:{integer:i+"integer",float:i+"float",boolean:i+"boolean"}},s={};s[n+"Local"]=e.ET_LOCAL,s[n+"Link"]=e.ET_LINK,s[n+"LinkReference"]=e.ET_LINKREF,s[n+"Reference"]=e.ET_REF,s.default=e.ET_LOCAL,a.entryType=s,a.invEntryType=r(s);var u={};u[n+"None"]=e.GT_NONE,u[n+"Context"]=e.GT_CONTEXT,u[n+"SystemContext"]=e.GT_SYSTEMCONTEXT,u[n+"User"]=e.GT_USER,u[n+"Group"]=e.GT_GROUP,u[n+"List"]=e.GT_LIST,u[n+"ResultList"]=e.GT_RESULTLIST,u[n+"Graph"]=e.GT_GRAPH,u[n+"Pipeline"]=e.GT_PIPELINE,u[n+"PipelineResult"]=e.GT_PIPELINERESULT,u[n+"String"]=e.GT_STRING,u.default=e.GT_NONE,a.graphType=u,a.invGraphType=r(u);var c={};return c[n+"InformationResource"]=e.RT_INFORMATIONRESOURCE,c[n+"ResolvableInformationResource"]=e.RT_RESOLVABLEINFORMATIONRESOURCE,c[n+"NamedResource"]=e.RT_NAMEDRESOURCE,c[n+"Unknown"]=e.RT_UNKNOWN,c.default=e.RT_INFORMATIONRESOURCE,a.resourceType=c,a.invResourceType=r(c),a}),define("dojo/date/stamp",["../_base/lang","../_base/array"],function(e,t){var r={};return e.setObject("dojo.date.stamp",r),r.fromISOString=function(e,n){r._isoRegExp||(r._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var o=r._isoRegExp.exec(e),i=null;if(o){o.shift(),o[1]&&o[1]--,o[6]&&(o[6]*=1e3),n&&(n=new Date(n),t.forEach(t.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(e){return n["get"+e]()}),function(e,t){o[t]=o[t]||e})),i=new Date(o[0]||1970,o[1]||0,o[2]||1,o[3]||0,o[4]||0,o[5]||0,o[6]||0),o[0]<100&&i.setFullYear(o[0]||1970);var a=0,s=o[7]&&o[7].charAt(0);"Z"!=s&&(a=60*(o[8]||0)+(Number(o[9])||0),"-"!=s&&(a*=-1)),s&&(a-=i.getTimezoneOffset()),a&&i.setTime(i.getTime()+6e4*a)}return i},r.toISOString=function(e,t){var r=function(e){return e<10?"0"+e:e};t=t||{};var n=[],o=t.zulu?"getUTC":"get",i="";if("time"!=t.selector){var a=e[o+"FullYear"]();i=["0000".substr((a+"").length)+a,r(e[o+"Month"]()+1),r(e[o+"Date"]())].join("-")}if(n.push(i),"date"!=t.selector){var s=[r(e[o+"Hours"]()),r(e[o+"Minutes"]()),r(e[o+"Seconds"]())].join(":"),u=e[o+"Milliseconds"]();if(t.milliseconds&&(s+="."+(u<100?"0":"")+r(u)),t.zulu)s+="Z";else if("time"!=t.selector){var c=e.getTimezoneOffset(),f=Math.abs(c);s+=(c>0?"-":"+")+r(Math.floor(f/60))+":"+r(f%60)}n.push(s)}return n.join("T")},r}),define("store/EntryInfo",["dojo/_base/array","dojo/Deferred","dojo/json","store/terms","rdfjson/Graph","dojo/date/stamp"],function(e,t,r,n,o,i){var a=function(e,t,r){this._entryURI=e||t.find(null,n.resource)[0].getSubject(),this._graph=t||new o,this._entryStore=r};a.prototype.getEntry=function(){return this._entry},a.prototype.setGraph=function(e){this._graph=e},a.prototype.getGraph=function(){return this._graph},a.prototype.commit=function(){var e=new t,n=this,o=this._entry.getEntryStore(),i=this.getModificationDate();return o.getREST().put(this.getEntryURI(),r.stringify(this._graph.exportRDFJSON()),i).then(function(){n._entry.setRefreshNeeded(!0),n._entry.refresh().then(function(){e.resolve(n)},function(){o.getCache().message("refreshed",n),e.resolve(n)})},function(t){e.reject(t)}),o.handleAsync(e.promise,"commitEntryInfo")},a.prototype.getEntryURI=function(){return this._entryURI},a.prototype.getId=function(){return this._entryStore.getFactory().getEntryId(this._entryURI)},a.prototype.getName=function(){return this._name},a.prototype.getMetadataURI=function(){return this._entryStore.getFactory().getMetadataURI(this._entryURI)},a.prototype.getExternalMetadataURI=function(){return this._graph.findFirstValue(this._entryURI,n.externalMetadata)},a.prototype.setExternalMetadataURI=function(e){this._graph.findAndRemove(this._entryURI,n.externalMetadata),this._graph.create(this._entryURI,n.externalMetadata,{type:"uri",value:e})},a.prototype.getCachedExternalMetadataURI=function(){return this._entryStore.getFactory().getCachedExternalMetadataURI(this._entryURI)},a.prototype.getResourceURI=function(){return this._graph.findFirstValue(this._entryURI,n.resource)},a.prototype.setResourceURI=function(e){var t=this.getResourceURI();if(this._graph.findAndRemove(this._entryURI,n.resource),this._graph.create(this._entryURI,n.resource,{type:"uri",value:e}),t)for(var r=this._graph.find(t),o=0;o<r.length;o++)r[o].setSubject(e)},a.prototype.getEntryType=function(){var e=this._graph.findFirstValue(this._entryURI,n.rdf.type);return n.entryType[e||"default"]};var s=function(e,t){for(var r=e._graph.find(e.getResourceURI(),n.rdf.type),o=0;o<r.length;o++){var i=t[r[o].getValue()];if(null!=i)return i}return t.default};return a.prototype.getResourceType=function(){return s(this,n.resourceType)},a.prototype.getGraphType=function(){return s(this,n.graphType)},a.prototype.getACL=function(t){var r=this._entryStore.getFactory(),o=function(e){return t?r.getEntryId(e.getValue()):e.getValue()},i=this.getResourceURI(),a=this.getMetadataURI(),s={admin:e.map(this._graph.find(this._entryURI,n.acl.write),o),rread:e.map(this._graph.find(i,n.acl.read),o),rwrite:e.map(this._graph.find(i,n.acl.write),o),mread:e.map(this._graph.find(a,n.acl.read),o),mwrite:e.map(this._graph.find(a,n.acl.write),o)};return s.contextOverride=0!==s.admin.length||0!==s.rread.length||0!==s.rwrite.length||0!==s.mread.length||0!==s.mwrite.length,s},a.prototype.hasACL=function(){return this.getACL().contextOverride},a.prototype.setACL=function(t){var r=this._graph,o=function(t,n,o,i){r.findAndRemove(t,n),e.forEach(o||[],function(e){e.length<i.length||0!==e.indexOf(i)?r.add(t,n,{type:"uri",value:i+e}):r.add(t,n,{type:"uri",value:e})})};t=t||{};var i=this.getResourceURI(),a=this.getMetadataURI(),s=this._entryStore.getFactory().getResourceBase(this._entry.getEntryStore(),"_principals");o(this._entryURI,n.acl.write,t.admin,s),o(i,n.acl.read,t.rread,s),o(i,n.acl.write,t.rwrite,s),o(a,n.acl.read,t.mread,s),o(a,n.acl.write,t.mwrite,s)},a.prototype.hasMetadataRevisions=function(){var e=this.getMetadataURI();return null!=this._graph.findFirstValue(null,"owl:sameAs",e)},a.prototype.getMetadataRevisions=function(){var e=[],t=this.getMetadataURI(),r=this._graph.find(null,"owl:sameAs",t);if(1!==r.length)return e;for(var n=r[0].getSubject(),o=this._entryStore;n;)e.push({uri:n,rev:n.substr(t.length+5),time:i.fromISOString(this._graph.findFirstValue(n,"prov:generatedAtTime")),by:o.getEntryURIFromURI(this._graph.findFirstValue(n,"prov:wasAttributedTo"))}),n=this._graph.findFirstValue(n,"prov:wasRevisionOf");return e.sort(function(e,t){return e.time>t.time?-1:e.time<t.time?1:0}),e},a.prototype.getMetadataRevisionGraph=function(e){return this._entryStore.getREST().get(e).then(function(e){return new o(e)})},a.prototype.getLabel=function(){return this._graph.findFirstValue(this.getResourceURI(),"http://www.w3.org/2000/01/rdf-schema#label")},a.prototype.setLabel=function(e){this._graph.findAndRemove(this.getResourceURI(),"http://www.w3.org/2000/01/rdf-schema#label"),null!=e&&""!=e&&this._graph.add(this.getResourceURI(),"http://www.w3.org/2000/01/rdf-schema#label",{type:"literal",value:e})},a.prototype.getFormat=function(){return this._graph.findFirstValue(this.getResourceURI(),"http://purl.org/dc/terms/format")},a.prototype.setFormat=function(e){this._graph.findAndRemove(this.getResourceURI(),"http://purl.org/dc/terms/format"),null!=e&&""!=e&&this._graph.addL(this.getResourceURI(),"http://purl.org/dc/terms/format",e)},a.prototype.getStatus=function(){return this._graph.findFirstValue(this.getEntryURI(),n.status.property)},a.prototype.setStatus=function(e){this._graph.findAndRemove(this.getEntryURI(),n.status.property),null!=e&&""!=e&&0===e.indexOf("http")&&this._graph.add(this.getEntryURI(),n.status.property,e)},a.prototype.getCreationDate=function(){var e=this._graph.findFirstValue(this.getEntryURI(),"http://purl.org/dc/terms/created");return i.fromISOString(e)},a.prototype.getModificationDate=function(){var e=this._graph.findFirstValue(this.getEntryURI(),"http://purl.org/dc/terms/modified");return null!=e?i.fromISOString(e):this.getCreationDate()},a.prototype.getCreator=function(){return this._graph.findFirstValue(this.getEntryURI(),"http://purl.org/dc/terms/creator")},a.prototype.getSize=function(){var e=this._graph.findFirstValue(this.getResourceURI(),"http://purl.org/dc/terms/extent");if(parseInt(e)==e)return parseInt(e)},a.prototype.getContributors=function(){return e.map(this._graph.find(this.getEntryURI(),"http://purl.org/dc/terms/contributor"),function(e){return e.getValue()})},a}),define("store/PrototypeEntry",["store/Entry","store/EntryInfo","store/terms"],function(e,t,r){var n=function(r,n){null!=n&&(this.specificId=n),n=n||"_newId";var o=r.getResourceURI(),i=new t(o+"/entry/"+n,null,r.getEntryStore());"_contexts"===r.getId()?i._resourceURI=r.getEntryStore().getBaseURI()+n:i._resourceURI=o+"/resource/"+n;var a=i.setResourceURI;i.setResourceURI=function(e){this._resourceURI=e,a.call(this,e)},i.getResourceURI=function(){return this._resourceURI},e.apply(this,[r,i])},o=function(){};return o.prototype=e.prototype,n.prototype=new o,n.prototype.getResource=function(){return this._resource},n.prototype.setACL=function(){return t.prototype.setACL.apply(this._entryInfo,arguments),this},n.prototype.setResourceURI=function(){return this._entryInfo.setResourceURI.apply(this._entryInfo,arguments),this},n.prototype.setExternalMetadataURI=function(){return t.prototype.setExternalMetadataURI.apply(this._entryInfo,arguments),this},n.prototype.setEntryType=function(e){var t=r.invEntryType[e];return t&&this._entryInfo.getGraph().create(this._entryInfo.getEntryURI(),r.rdf.type,{type:"uri",value:t}),this},n.prototype.setGraphType=function(e){this._gt=e;var t=r.invGraphType[e];return t&&this._entryInfo.getGraph().create(this._entryInfo.getResourceURI(),r.rdf.type,{type:"uri",value:t}),this},n.prototype.setResourceType=function(e){var t=r.invResourceType[e];return t&&this._entryInfo.getGraph().create(this._entryInfo.getResourceURI(),r.rdf.type,{type:"uri",value:t}),this},n.prototype.setParentList=function(e){return this.parentListEntry=e,this},n.prototype.getParentList=function(){return this.parentListEntry},n.prototype.getSpecificId=function(){return this.specificId},n.prototype.commitMetadata=function(){throw"Not supported on PrototypeEntry, call commit instead."},n.prototype.commitCachedExternalMetadata=function(){throw"Not supported on PrototypeEntry, call commit instead."},n.prototype.create=function(){return this._context.getEntryStore().createEntry(this)},n.prototype.commit=function(){return this._context.getEntryStore().createEntry(this)},n}),define("store/Graph",["dojo/json","store/Resource","rdfjson/Graph"],function(e,t,r){var n=function(e,n,o,i){t.apply(this,arguments),this._graph=i instanceof r?i:new r(i)},o=function(){};return o.prototype=t.prototype,n.prototype=new o,n.prototype.getGraph=function(){return this._graph},n.prototype.setGraph=function(e){return this._graph=e||new r,this},n.prototype.commit=function(){return this._entryStore.handleAsync(this._entryStore.getREST().put(this._resourceURI,e.stringify(this._graph.exportRDFJSON())),"commitGraph")},n.prototype.getSource=function(){return this._graph.exportRDFJSON()},n.prototype._update=function(e){this._graph=new r(e)},n}),define("store/Pipeline",["dojo/_base/array","dojo/json","./terms","./Graph"],function(e,t,r,n){var o=function(e,t,r,o){n.apply(this,arguments)},i=function(){};return i.prototype=n.prototype,o.prototype=new i,o.prototype.getDestination=function(){return this._graph.findFirstValue(null,r.pipeline.transformDestination)},o.prototype.setDestination=function(e){this._graph.findAndRemove(null,r.pipeline.transformDestination);var t="object"==typeof e&&e.getURI?e.getURI():e;this._graph.add(this._resourceURI,r.pipeline.transformDestination,t)},o.prototype.getDetectDestination=function(){var e=this._graph.findFirstValue(null,r.pipeline.transformDetectDestination);return"undefined"!=typeof e&&0===e.toLowerCase().indexOf("true")},o.prototype.setDetectDestination=function(e){this._graph.findAndRemove(null,r.pipeline.transformDetectDestination),e===!0&&this._graph.add(this._resourceURI,r.pipeline.transformDetectDestination,{type:"literal",value:"true",datatype:r.xsd.boolean})},o.prototype.getTransforms=function(){var t=this._graph.find(null,r.pipeline.transform),n=e.map(t,function(e){return e.getValue()}),o=this;return n.sort(function(e,t){var r=o.getPriority(e),n=o.getPriority(t);return r-n}),n},o.prototype.getTransformForType=function(t){var r,n=this.getTransforms();return e.forEach(n,function(e){this.getTransformType(e)===t&&(r=e)},this),r},o.prototype.addTransform=function(e,t){var n=this.getTransforms(),o=(n.length>0?this.getPriority(n[n.length-1]):0,this._graph.add(this._resourceURI,r.pipeline.transform)),i=o.getValue();return this.setTransformType(i,e),this.setTransformArguments(i,t),i},o.prototype.removeTransform=function(e){this.setTransformArguments(e,{}),this._graph.findAndRemove(e),this._graph.findAndRemove(null,null,{type:"bnode",value:e})},o.prototype.setOrderOfTransforms=function(e){for(var t=0;t<e.length;t++)this._graph.findAndRemove(e[t],r.pipeline.transformPriority),this._graph.add(e[t],r.pipeline.transformPriority,{type:"literal",value:""+t,datatype:r.xsd.integer})},o.prototype.getPriority=function(e){var t=this._graph.findFirstValue(e,r.pipeline.transformPriority);return"string"!=typeof t||(t=parseFloat(t),isNaN(t))?0:t},o.prototype.setPriority=function(e,t){this._graph.findAndRemove(e,r.pipeline.transformPriority),this._graph.add(e,r.pipeline.transformPriority,{type:"literal",value:""+t,datatype:r.xsd.integer})},o.prototype.transformTypes={TABULAR:"tabular",ROWSTORE:"rowstore",EMPTY:"empty",FETCH:"fetch",VALIDATE:"validate",MERGE:"merge"},o.prototype.getTransformType=function(e){return this._graph.findFirstValue(e,r.pipeline.transformType)},o.prototype.setTransformType=function(e,t){this._graph.findAndRemove(e,r.pipeline.transformType),this._graph.addL(e,r.pipeline.transformType,t)},o.prototype.getTransformArguments=function(t){var n,o=this._graph.find(t,r.pipeline.transformArgument);return e.forEach(o,function(e){var t=this._graph.findFirstValue(e.getValue(),r.pipeline.transformArgumentKey),o=this._graph.findFirstValue(e.getValue(),r.pipeline.transformArgumentValue);n=n||{},n[t]=o},this),n},o.prototype.setTransformArguments=function(t,n){var o=this._graph.find(t,r.pipeline.transformArgument);e.forEach(o,function(e){this._graph.findAndRemove(e.getValue(),r.pipeline.transformArgumentKey),this._graph.findAndRemove(e.getValue(),r.pipeline.transformArgumentValue),this._graph.remove(e)},this);for(var i in n)if(n.hasOwnProperty(i)){var a=this._graph.add(t,r.pipeline.transformArgument);this._graph.addL(a.getValue(),r.pipeline.transformArgumentKey,i),this._graph.addL(a.getValue(),r.pipeline.transformArgumentValue,n[i])}},o.prototype.getTransformProperty=function(e,t){var r=this.getTransformForType(e);if(r){var n=this.getTransformArguments(r);if(n&&n[t])return n[t]}},o.prototype.setTransformProperty=function(e,t,r){var n=this.getTransformArguments(e);if(null!=n)n[t]=r,this.setTransformArguments(e,n);else{var o=this.getTransformForType(e);n=this.getTransformArguments(o),null!=n&&(n[t]=r,this.setTransformArguments(o,n))}},o.prototype.execute=function(e,r){var n,o=this.getEntryStore();return r=r||{},r.pipeline=this.getEntryURI(),null==e?n=o.getBaseURI()+o.getContextId(this.getEntryURI())+"/execute":(r.source=e.getURI(),n=e.getContext().getResourceURI()+"/execute"),o.handleAsync(o.getREST().post(n,t.stringify(r)),"execute").then(function(e){var r=t.parse(e);return r.result},function(e){throw e})},o}),define("store/Context",["dojo/_base/lang","dojo/json","store/String","store/types","./PrototypeEntry","./Resource","./Graph","./Pipeline"],function(e,t,r,n,o,i,a,s){var u=function(e,t,r){i.apply(this,arguments)},c=function(){};return c.prototype=i.prototype,u.prototype=new c,u.prototype.listEntries=function(e,t,r){return this.getEntryStore().getListEntries(this._resourceURI+"/entry/_all",e,t,r)},u.prototype.getEntryById=function(e,t){return this.getEntryStore().getEntry(this.getEntryURIbyId(e),t)},u.prototype.getEntryURIbyId=function(e){return this.getEntryStore().getEntryURI(this.getId(),e)},u.prototype.newEntry=function(e){return new o(this,e)},u.prototype.newNamedEntry=function(e){return new o(this,e).setResourceType(n.RT_NAMEDRESOURCE)},u.prototype.newLink=function(e,t){return new o(this,t).setResourceURI(e).setEntryType(n.ET_LINK)},u.prototype.newLinkRef=function(e,t,r){return new o(this,r).setResourceURI(e).setExternalMetadataURI(t).setEntryType(n.ET_LINKREF)},u.prototype.newRef=function(e,t,r){return new o(this,r).setResourceURI(e).setExternalMetadataURI(t).setEntryType(n.ET_REF)},u.prototype.newList=function(e){return new o(this,e).setGraphType(n.GT_LIST)},u.prototype.newGraph=function(e,t){var r=new o(this,t).setGraphType(n.GT_GRAPH),i=r.getEntryInfo();return r._resource=new a(i.getEntryURI(),i.getResourceURI(),this.getEntryStore(),e||{}),r},u.prototype.newString=function(e,t){var i=new o(this,t).setGraphType(n.GT_STRING),a=i.getEntryInfo();return i._resource=new r(a.getEntryURI(),a.getResourceURI(),this.getEntryStore(),e),i},u.prototype.newPipeline=function(e){var t=new o(this,e).setGraphType(n.GT_PIPELINE),r=t.getEntryInfo();return t._resource=new s(r.getEntryURI(),r.getResourceURI(),this.getEntryStore(),{}),t},u.prototype.getName=function(){return this._name},u.prototype.setName=function(r){var n=this._name;return this._name=r,this._entryStore.handleAsync(this._entryStore.getREST().put(this.getEntryURI()+"/name",t.stringify({name:r})).then(e.hitch(this,function(e){var t=this.getEntry(!0);return t&&(t.getEntryInfo()._name=e),e}),e.hitch(this,function(e){throw this._name=n,e})),"setContextName")},u.prototype.getHomeContextOf=function(){return this.getEntry().then(function(e){var t=e.getEntryStore(),r=e.getReferrers("store:homeContext");if(r.length>0)return t.getEntry(t.getEntryURIFromURI(r[0]));throw new Error("No user or group that has this context as home context")})},u.prototype._update=function(e){this._name=e.alias||e.name},u}),!function(e){"use strict";function t(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function r(e,t){return e<<t|e>>>32-t}function n(e,n,o,i,a,s){return t(r(t(t(n,e),t(i,s)),a),o)}function o(e,t,r,o,i,a,s){return n(t&r|~t&o,e,t,i,a,s)}function i(e,t,r,o,i,a,s){return n(t&o|r&~o,e,t,i,a,s)}function a(e,t,r,o,i,a,s){return n(t^r^o,e,t,i,a,s)}function s(e,t,r,o,i,a,s){return n(r^(t|~o),e,t,i,a,s)}function u(e,r){e[r>>5]|=128<<r%32,e[(r+64>>>9<<4)+14]=r;var n,u,c,f,l,d=1732584193,p=-271733879,h=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)u=d,c=p,f=h,l=g,d=o(d,p,h,g,e[n],7,-680876936),g=o(g,d,p,h,e[n+1],12,-389564586),h=o(h,g,d,p,e[n+2],17,606105819),p=o(p,h,g,d,e[n+3],22,-1044525330),d=o(d,p,h,g,e[n+4],7,-176418897),g=o(g,d,p,h,e[n+5],12,1200080426),h=o(h,g,d,p,e[n+6],17,-1473231341),p=o(p,h,g,d,e[n+7],22,-45705983),d=o(d,p,h,g,e[n+8],7,1770035416),g=o(g,d,p,h,e[n+9],12,-1958414417),h=o(h,g,d,p,e[n+10],17,-42063),p=o(p,h,g,d,e[n+11],22,-1990404162),d=o(d,p,h,g,e[n+12],7,1804603682),g=o(g,d,p,h,e[n+13],12,-40341101),h=o(h,g,d,p,e[n+14],17,-1502002290),p=o(p,h,g,d,e[n+15],22,1236535329),d=i(d,p,h,g,e[n+1],5,-165796510),g=i(g,d,p,h,e[n+6],9,-1069501632),h=i(h,g,d,p,e[n+11],14,643717713),p=i(p,h,g,d,e[n],20,-373897302),d=i(d,p,h,g,e[n+5],5,-701558691),g=i(g,d,p,h,e[n+10],9,38016083),h=i(h,g,d,p,e[n+15],14,-660478335),p=i(p,h,g,d,e[n+4],20,-405537848),d=i(d,p,h,g,e[n+9],5,568446438),g=i(g,d,p,h,e[n+14],9,-1019803690),h=i(h,g,d,p,e[n+3],14,-187363961),p=i(p,h,g,d,e[n+8],20,1163531501),d=i(d,p,h,g,e[n+13],5,-1444681467),g=i(g,d,p,h,e[n+2],9,-51403784),h=i(h,g,d,p,e[n+7],14,1735328473),p=i(p,h,g,d,e[n+12],20,-1926607734),d=a(d,p,h,g,e[n+5],4,-378558),g=a(g,d,p,h,e[n+8],11,-2022574463),h=a(h,g,d,p,e[n+11],16,1839030562),p=a(p,h,g,d,e[n+14],23,-35309556),d=a(d,p,h,g,e[n+1],4,-1530992060),g=a(g,d,p,h,e[n+4],11,1272893353),h=a(h,g,d,p,e[n+7],16,-155497632),p=a(p,h,g,d,e[n+10],23,-1094730640),d=a(d,p,h,g,e[n+13],4,681279174),g=a(g,d,p,h,e[n],11,-358537222),h=a(h,g,d,p,e[n+3],16,-722521979),p=a(p,h,g,d,e[n+6],23,76029189),d=a(d,p,h,g,e[n+9],4,-640364487),g=a(g,d,p,h,e[n+12],11,-421815835),h=a(h,g,d,p,e[n+15],16,530742520),p=a(p,h,g,d,e[n+2],23,-995338651),d=s(d,p,h,g,e[n],6,-198630844),g=s(g,d,p,h,e[n+7],10,1126891415),h=s(h,g,d,p,e[n+14],15,-1416354905),p=s(p,h,g,d,e[n+5],21,-57434055),d=s(d,p,h,g,e[n+12],6,1700485571),g=s(g,d,p,h,e[n+3],10,-1894986606),h=s(h,g,d,p,e[n+10],15,-1051523),p=s(p,h,g,d,e[n+1],21,-2054922799),d=s(d,p,h,g,e[n+8],6,1873313359),g=s(g,d,p,h,e[n+15],10,-30611744),h=s(h,g,d,p,e[n+6],15,-1560198380),p=s(p,h,g,d,e[n+13],21,1309151649),d=s(d,p,h,g,e[n+4],6,-145523070),g=s(g,d,p,h,e[n+11],10,-1120210379),h=s(h,g,d,p,e[n+2],15,718787259),p=s(p,h,g,d,e[n+9],21,-343485551),d=t(d,u),p=t(p,c),h=t(h,f),g=t(g,l);return[d,p,h,g]}function c(e){var t,r="",n=32*e.length;for(t=0;n>t;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function f(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;n>t;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function l(e){return c(u(f(e),8*e.length))}function d(e,t){var r,n,o=f(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=u(o,8*e.length)),r=0;16>r;r+=1)i[r]=909522486^o[r],a[r]=1549556828^o[r];return n=u(i.concat(f(t)),512+8*t.length),c(u(a.concat(n),640))}function p(e){var t,r,n="0123456789abcdef",o="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),o+=n.charAt(t>>>4&15)+n.charAt(15&t);return o}function h(e){return unescape(encodeURIComponent(e))}function g(e){return l(h(e))}function y(e){return p(g(e))}function m(e,t){return d(h(e),h(t))}function v(e,t){return p(m(e,t))}function _(e,t,r){return t?r?m(t,e):v(t,e):r?g(e):y(e)}"function"==typeof define&&define.amd?define("md5",[],function(){return _}):"object"==typeof module&&module.exports?module.exports=_:e.md5=_}(this),define("store/solr",["dojo/_base/lang","dojo/_base/array","rdfjson/namespaces","store/SearchList","store/Context","md5"],function(e,t,r,n,o,i){var a=function(e){this._entrystore=e,this.properties=[]};a.prototype.list=function(e){return new n(this._entrystore,this,e)};var s=["title","description","keyword","tagLiteral","tagURI","lang","all","uri","subject","predicate","objectLiteral","objectUri","resource","rdfType","context","creator","contributors","lists","public","created","modified","entryType","graphType","resourceType","admin","metadata_r","metadata_rw","resource_r","resource_rw","status"],u={entryType:"entryType",graphType:"graphType",resourceType:"resourceType",tagLiteral:"tag.literal",tagURI:"tag.uri",subject:"metadata.subject",predicate:"metadata.predicate",objectLiteral:"metadata.object.literal",objectUri:"metadata.object.uri",admin:"acl.admin",metadata_r:"acl.metadata.r",metadata_rw:"acl.metadata.rw",resource_r:"acl.resource.r",resource_rw:"acl.resource.rw"};t.map(s,function(e){a.prototype[e]=function(t,r){return this["_"+e]=t,"undefined"!=typeof r&&(this["_"+e+"_modifier"]=r),this}}),a.prototype.context=function(t){return this._context=t instanceof o?t.getResourceURI():t&&t.getResourceURI?t.getResourceURI():e.isString(t)&&""!==t?t:null,this},a.prototype.rdfType=function(n){return e.isArray(n)?this._rdfType=t.map(n,function(e){return r.expand(e)}):this._rdfType=r.expand(n),this},a.prototype.title_lang=function(e,t){return this._title_lang={value:e,lang:t},this},a.prototype.limit=function(e){return this._limit=e,this},a.prototype.getLimit=function(){return this._limit},a.prototype.sort=function(e){return this._sort=e,this},a.prototype.offset=function(e){return this._offset=e,this},a.prototype.getQuery=function(r){var n,o,i,a,c=[];for(null!=this._title_lang&&c.push("title."+this._title_lang.lang+":"+encodeURIComponent(this._title_lang.value.replace(/:/g,"\\:"))),o=0;o<s.length;o++){var f=s[o],l=this["_"+f];if(null!=l){a=u[f]||f;var d=this["_"+f+"_modifier"];if(e.isString(l)&&""!==l)d===!0||"not"===d?c.push("NOT("+a+":"+encodeURIComponent(l.replace(/:/g,"\\:"))+")"):c.push(a+":"+encodeURIComponent(l.replace(/:/g,"\\:")));else if(e.isArray(l)&&l.length>0){for(n=[],i=0;i<l.length;i++){var p=l[i];e.isString(p)&&n.push(a+":"+encodeURIComponent(p.replace(/:/g,"\\:")))}d===!0||"not"===d?c.push("NOT("+n.join("+OR+")+")"):"and"===d?c.push("("+n.join("+AND+")+")"):c.push("("+n.join("+OR+")+")")}}}if(this.disjunctiveProperties){var n=[];t.forEach(this.properties,function(r){var o=r.object,i="metadata.predicate."+r.nodetype+"."+r.md5;e.isString(o)?n.push(i+":"+encodeURIComponent(o.replace(/:/g,"\\:"))):e.isArray(o)&&o.length>0&&t.forEach(o,function(e){n.push(i+":"+encodeURIComponent(e.replace(/:/g,"\\:")))})}),n.length>0&&c.push("("+n.join("+OR+")+")")}else t.forEach(this.properties,function(r){var n=r.object,o="metadata.predicate."+r.nodetype+"."+r.md5;if(e.isString(n))r.modifier===!0||"not"===r.modifier?c.push("NOT("+o+":"+encodeURIComponent(n.replace(/:/g,"\\:"))+")"):c.push(o+":"+encodeURIComponent(n.replace(/:/g,"\\:")));else if(e.isArray(n)&&n.length>0){var i=[];t.forEach(n,function(e){i.push(o+":"+encodeURIComponent(e.replace(/:/g,"\\:")))},this),r.modifier===!0||"not"===r.modifier?c.push("NOT("+i.join("+OR+")+")"):"and"===r.modifier?c.push("("+i.join("+AND+")+")"):c.push("("+i.join("+OR+")+")")}},this);var h="";return null!=this._limit&&(h="&limit="+this._limit),this._offset&&(h=h+"&offset="+this._offset),this._sort&&(h=h+"&sort="+(this._sort||"score+asc")),r.getBaseURI()+"search?type=solr&query="+c.join("+AND+")+h},a.prototype.integerProperty=function(e,t,n){var o=i(r.expand(e)).substr(0,8);return this.properties.push({md5:o,object:t,modifier:n,nodetype:"integer"}),this},a.prototype.literalProperty=function(e,t,n){var o=i(r.expand(e)).substr(0,8);return this.properties.push({md5:o,object:t,modifier:n,nodetype:"literal"}),this},a.prototype.uriProperty=function(n,o,a){var s=i(r.expand(n)).substr(0,8);return o=e.isArray(o)?t.map(o,function(e){return r.expand(e)}):r.expand(o),this.properties.push({md5:s,object:o,modifier:a,nodetype:"uri"}),this},a.prototype.disjuntiveProperties=function(){this.disjunctiveProperties=!0};var c={Solr:a},f=s.concat(["limit","getLimit","offset","sort","context","title_lang","literalProperty","uriProperty"]);return t.map(f,function(e){c[e]=function(t,r){var n=new a;return n[e].call(n,t,r)}}),c}),define("store/Cache",[],function(){var e=function(){this._listenerCounter=0,this._listenersIdx={},this._cacheIdx={},this._cacheIdxResource={},this._cacheCtrl={}};return e.prototype.cache=function(e,t){var r=null!=this._cacheIdx[e.getURI()];this._cacheIdx[e.getURI()]=e;var n=this._cacheIdxResource[e.getResourceURI()];"undefined"==typeof n&&(n=[],this._cacheIdxResource[e.getResourceURI()]=n),n.indexOf(e)===-1&&n.push(e),this._cacheCtrl[e.getURI()]={date:(new Date).getTime()},r&&t!==!0&&this.messageListeners("refreshed",e)},e.prototype.unCache=function(e){delete this._cacheIdx[e.getURI()];var t=this._cacheIdxResource[e.getResourceURI()];if("undefined"!=typeof t)for(var r=0;r<t.length;r++)t[r].getURI()===e.getURI()&&t.splice(r,1),0===t.length&&delete this._cacheIdxResource[e.getResourceURI()]},e.prototype.setRefreshNeeded=function(e,t){var r=this._cacheCtrl[e.getURI()];if(null==r)throw"No cache control of existing entry: "+e.getURI();r.stale=!0,t!==!0&&this.messageListeners("needRefresh",e)},e.prototype.cacheAll=function(e,t){for(var r=0;r<e.length;r++)this.cache(e[r],t)},e.prototype.get=function(e){return this._cacheIdx[e]},e.prototype.getByResourceURI=function(e){var t=this._cacheIdxResource[e];return"undefined"!=typeof t&&"function"==typeof t.slice?t.slice(0):[]},e.prototype.needRefresh=function(e){var t=this._cacheCtrl[e.getURI()];if(null==t)throw"No cache control of existing entry: "+e.getURI();return t.stale===!0},e.prototype.addCacheUpdateListener=function(e){null!=e.__clid&&(e.__clid="idx_"+this._listenerCounter,this._listenerCounter++),this._listenersIdx[e.__clid]=e},e.prototype.removeCacheUpdateListener=function(e){null!=e.__clid&&delete this._listenersIdx[e.__clid]},e.prototype.messageListeners=function(e,t){for(var r in this._listenersIdx)this._listenersIdx.hasOwnProperty(r)&&this._listenersIdx[r](e,t)},e.prototype.allNeedRefresh=function(){for(var e in this._cacheIdx)this._cacheIdx.hasOwnProperty(e)&&this.setRefreshNeeded(this._cacheIdx[e],!0);this.messageListeners("allEntriesNeedRefresh")},e.prototype.clear=function(){this._cacheIdx={},this._cacheIdxResource={},this._cacheCtrl={}},e}),define("dojo/errors/RequestError",["./create"],function(e){return e("RequestError",function(e,t){this.response=t})}),define("dojo/io-query",["./_base/lang"],function(e){var t={};return{objectToQuery:function(r){var n=encodeURIComponent,o=[];for(var i in r){var a=r[i];if(a!=t[i]){var s=n(i)+"=";if(e.isArray(a))for(var u=0,c=a.length;u<c;++u)o.push(s+n(a[u]));else o.push(s+n(a))}}return o.join("&")},queryToObject:function(t){for(var r,n,o,i=decodeURIComponent,a=t.split("&"),s={},u=0,c=a.length;u<c;++u)if(o=a[u],o.length){var f=o.indexOf("=");f<0?(r=i(o),n=""):(r=i(o.slice(0,f)),n=i(o.slice(f+1))),"string"==typeof s[r]&&(s[r]=[s[r]]),e.isArray(s[r])?s[r].push(n):s[r]=n}return s}}}),define("dojo/request/util",["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang","../promise/Promise","../has"],function(e,t,r,n,o,i,a,s,u){function c(e){return l(e)}function f(e){return void 0!==e.data?e.data:e.text}e.deepCopy=function(t,r){for(var n in r){var o=t[n],i=r[n];o!==i&&(o&&"object"==typeof o&&i&&"object"==typeof i?e.deepCopy(o,i):t[n]=i)}return t},e.deepCreate=function(t,r){r=r||{};var n,o,i=a.delegate(t);for(n in t)o=t[n],o&&"object"==typeof o&&(i[n]=e.deepCreate(o,r[n]));return e.deepCopy(i,r)};var l=Object.freeze||function(e){return e};e.deferred=function(o,i,u,d,p,h){function g(e){throw e.response=o,e}var y=new n(function(e){return i&&i(y,o),e&&(e instanceof t||e instanceof r)?e:new r("Request canceled",o)});y.response=o,y.isValid=u,y.isReady=d,y.handleResponse=p;var m=y.then(c).otherwise(g);e.notify&&m.then(a.hitch(e.notify,"emit","load"),a.hitch(e.notify,"emit","error"));var v=m.then(f),_=new s;for(var b in v)v.hasOwnProperty(b)&&(_[b]=v[b]);return _.response=m,l(_),h&&y.then(function(e){h.call(y,e)},function(e){h.call(y,o,e)}),y.promise=_,y.then=_.then,y},e.addCommonMethods=function(e,t){i.forEach(t||["GET","POST","PUT","DELETE"],function(t){e[("DELETE"===t?"DEL":t).toLowerCase()]=function(r,n){return n=a.delegate(n||{}),n.method=t,e(r,n)}})},e.parseArgs=function(e,t,r){var n=t.data,i=t.query;return n&&!r&&("object"!=typeof n||u("native-xhr2")&&(n instanceof ArrayBuffer||n instanceof Blob)||(t.data=o.objectToQuery(n))),i?("object"==typeof i&&(i=o.objectToQuery(i)),t.preventCache&&(i+=(i?"&":"")+"request.preventCache="+ +new Date)):t.preventCache&&(i="request.preventCache="+ +new Date),e&&i&&(e+=(~e.indexOf("?")?"&":"?")+i),{url:e,options:t,getHeader:function(e){return null}}},e.checkStatus=function(e){return e=e||0,e>=200&&e<300||304===e||1223===e||!e}}),define("dojo/errors/RequestTimeoutError",["./create","./RequestError"],function(e,t){return e("RequestTimeoutError",null,t,{dojoType:"timeout"})}),define("dojo/_base/window",["./kernel","./lang","../sniff"],function(e,t,r){var n={global:e.global,doc:e.global.document||null,body:function(t){return t=t||e.doc,t.body||t.getElementsByTagName("body")[0]},setContext:function(t,r){e.global=n.global=t,e.doc=n.doc=r},withGlobal:function(t,r,o,i){var a=e.global;try{return e.global=n.global=t,n.withDoc.call(null,t.document,r,o,i)}finally{e.global=n.global=a}},withDoc:function(t,o,i,a){var s,u,c,f=n.doc,l=r("quirks"),d=r("ie");try{return e.doc=n.doc=t,e.isQuirks=r.add("quirks","BackCompat"==e.doc.compatMode,!0,!0),r("ie")&&(c=t.parentWindow)&&c.navigator&&(s=parseFloat(c.navigator.appVersion.split("MSIE ")[1])||void 0,u=t.documentMode,u&&5!=u&&Math.floor(s)!=u&&(s=u),e.isIE=r.add("ie",s,!0,!0)),i&&"string"==typeof o&&(o=i[o]),o.apply(i,a||[])}finally{e.doc=n.doc=f,e.isQuirks=r.add("quirks",l,!0,!0),
e.isIE=r.add("ie",d,!0,!0)}}};return r("extend-dojo")&&t.mixin(e,n),n}),define("dojo/request/watch",["./util","../errors/RequestTimeoutError","../errors/CancelError","../_base/array","../_base/window"],function(e,t,r,n,o,i){function a(){for(var e,r=+new Date,n=0;n<c.length&&(e=c[n]);n++){var o=e.response,i=o.options;e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(o)?(c.splice(n--,1),s._onAction&&s._onAction()):e.isReady&&e.isReady(o)?(c.splice(n--,1),e.handleResponse(o),s._onAction&&s._onAction()):e.startTime&&e.startTime+(i.timeout||0)<r&&(c.splice(n--,1),e.cancel(new t("Timeout exceeded",o)),s._onAction&&s._onAction())}s._onInFlight&&s._onInFlight(e),c.length||(clearInterval(u),u=null)}function s(e){e.response.options.timeout&&(e.startTime=+new Date),e.isFulfilled()||(c.push(e),u||(u=setInterval(a,50)),e.response.options.sync&&a())}var u=null,c=[];return s.cancelAll=function(){try{n.forEach(c,function(e){try{e.cancel(new r("All requests canceled."))}catch(e){}})}catch(e){}},o&&i&&o.doc.attachEvent&&i(o.global,"unload",function(){s.cancelAll()}),s}),define("dojo/selector/_loader",["../has","require"],function(e,t){if("undefined"!=typeof document){var r=document.createElement("div");e.add("dom-qsa2.1",!!r.querySelectorAll),e.add("dom-qsa3",function(){try{return r.innerHTML="<p class='TEST'></p>",1==r.querySelectorAll(".TEST:empty").length}catch(e){}})}var n,o="./acme",i="./lite";return{load:function(r,a,s,u){if(u&&u.isBuild)return void s();var c=t;if(r="default"==r?e("config-selectorEngine")||"css3":r,r="css2"==r||"lite"==r?i:"css2.1"==r?e("dom-qsa2.1")?i:o:"css3"==r?e("dom-qsa3")?i:o:"acme"==r?o:(c=a)&&r,"?"==r.charAt(r.length-1)){r=r.substring(0,r.length-1);var f=!0}return f&&(e("dom-compliant-qsa")||n)?s(n):void c([r],function(e){"./lite"!=r&&(n=e),s(e)})}}}),define("dojo/request/handlers",["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(e,t,r,n){function o(e){var t=c[e.options.handleAs];return e.data=t?t(e):e.data||e.text,e}n.add("activex","undefined"!=typeof ActiveXObject),n.add("dom-parser",function(e){return"DOMParser"in e});var i;if(n("activex")){var a,s=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];i=function(e){function t(e){try{var t=new ActiveXObject(e);t.async=!1,t.loadXML(i),o=t,a=e}catch(e){return!1}return!0}var o=e.data,i=e.text;return o&&n("dom-qsa2.1")&&!o.querySelectorAll&&n("dom-parser")&&(o=(new DOMParser).parseFromString(i,"application/xml")),o&&o.documentElement||a&&t(a)||r.some(s,t),o}}var u=function(e){return n("native-xhr2-blob")||"blob"!==e.options.handleAs||"undefined"==typeof Blob?e.xhr.response:new Blob([e.xhr.response],{type:e.xhr.getResponseHeader("Content-Type")})},c={javascript:function(e){return t.eval(e.text||"")},json:function(t){return e.parse(t.text||null)},xml:i,blob:u,arraybuffer:u,document:u};return o.register=function(e,t){c[e]=t},o}),define("dojo/request/xhr",["../errors/RequestError","./watch","./handlers","./util","../has"],function(e,t,r,n,o){function i(t,o){var i=t.xhr;t.status=t.xhr.status;try{t.text=i.responseText}catch(e){}if("xml"===t.options.handleAs&&(t.data=i.responseXML),!o)try{r(t)}catch(e){o=e}var a;if(o)this.reject(o);else{try{r(t)}catch(e){a=e}n.checkStatus(i.status)?a?this.reject(a):this.resolve(t):a?(o=new e("Unable to load "+t.url+" status: "+i.status+" and an error in handleAs: transformation of response",t),this.reject(o)):(o=new e("Unable to load "+t.url+" status: "+i.status,t),this.reject(o))}}function a(e){return this.xhr.getResponseHeader(e)}function s(r,g,y){var m=o("native-formdata")&&g&&g.data&&g.data instanceof FormData,v=n.parseArgs(r,n.deepCreate(h,g),m);r=v.url,g=v.options;var _,b=function(){_&&_()},E=n.deferred(v,l,u,c,i,b),R=v.xhr=s._create();if(!R)return E.cancel(new e("XHR was not created")),y?E:E.promise;v.getHeader=a,f&&(_=f(R,E,v));var w="undefined"==typeof g.data?null:g.data,x=!g.sync,I=g.method;try{R.open(I,r,x,g.user||p,g.password||p),g.withCredentials&&(R.withCredentials=g.withCredentials),o("native-response-type")&&g.handleAs in d&&(R.responseType=d[g.handleAs]);var T=g.headers,S=!m&&"application/x-www-form-urlencoded";if(T)for(var C in T)"content-type"===C.toLowerCase()?S=T[C]:T[C]&&R.setRequestHeader(C,T[C]);S&&S!==!1&&R.setRequestHeader("Content-Type",S),T&&"X-Requested-With"in T||R.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.notify&&n.notify.emit("send",v,E.promise.cancel),R.send(w)}catch(e){E.reject(e)}return t(E),R=null,y?E:E.promise}o.add("native-xhr",function(){return"undefined"!=typeof XMLHttpRequest}),o.add("dojo-force-activex-xhr",function(){return o("activex")&&"file:"===window.location.protocol}),o.add("native-xhr2",function(){if(o("native-xhr")&&!o("dojo-force-activex-xhr")){var e=new XMLHttpRequest;return"undefined"!=typeof e.addEventListener&&("undefined"==typeof opera||"undefined"!=typeof e.upload)}}),o.add("native-formdata",function(){return"undefined"!=typeof FormData}),o.add("native-response-type",function(){return o("native-xhr")&&"undefined"!=typeof(new XMLHttpRequest).responseType}),o.add("native-xhr2-blob",function(){if(o("native-response-type")){var e=new XMLHttpRequest;e.open("GET","/",!0),e.responseType="blob";var t=e.responseType;return e.abort(),"blob"===t}});var u,c,f,l,d={blob:o("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"};o("native-xhr2")?(u=function(e){return!this.isFulfilled()},l=function(e,t){t.xhr.abort()},f=function(t,r,n){function o(e){r.handleResponse(n)}function i(t){var o=t.target,i=new e("Unable to load "+n.url+" status: "+o.status,n);r.handleResponse(n,i)}function a(e){e.lengthComputable?(n.loaded=e.loaded,n.total=e.total,r.progress(n)):3===n.xhr.readyState&&(n.loaded="loaded"in e?e.loaded:e.position,r.progress(n))}return t.addEventListener("load",o,!1),t.addEventListener("error",i,!1),t.addEventListener("progress",a,!1),function(){t.removeEventListener("load",o,!1),t.removeEventListener("error",i,!1),t.removeEventListener("progress",a,!1),t=null}}):(u=function(e){return e.xhr.readyState},c=function(e){return 4===e.xhr.readyState},l=function(e,t){var r=t.xhr,n=typeof r.abort;"function"!==n&&"object"!==n&&"unknown"!==n||r.abort()});var p,h={data:null,query:null,sync:!1,method:"GET"};if(s._create=function(){throw new Error("XMLHTTP not available")},o("native-xhr")&&!o("dojo-force-activex-xhr"))s._create=function(){return new XMLHttpRequest};else if(o("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),s._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),s._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(e){}}return n.addCommonMethods(s),s}),define("store/rest",["dojo/_base/array","require","dojo/_base/lang","dojo/Deferred","dojo/request","dojo/has"],function(e,t,r,n,o,i){var a={Accept:"application/json","Content-Type":"application/json; charset=UTF-8","X-Requested-With":null},s=3e4,u=function(e){var t=document.createElement("a"),r=document.createElement("a");return t.href=e,r.href=window.location.href,t.hostname===r.hostname&&t.port===r.port&&t.protocol===r.protocol&&"file:"!==r.protocol},c={auth:function(t){if(delete a.cookie,t.logout!==!0){var r={auth_username:t.user,auth_password:t.password,auth_maxage:null!=t.maxAge?t.maxAge:604800};if(i("host-browser"))return c.post(t.base+"auth/cookie",r);var n=c.post(t.base+"auth/cookie",r);return n.response.then(function(t){var r=t.getHeader("set-cookie");e.some(r,function(e){"auth_token="===e.substring(0,11)&&(a.cookie=[e])})})}return o.get(t.base+"auth/logout",{preventCache:!0,handleAs:"json",headers:a,withCredentials:!0,timeout:s})},get:function(e,c){var f=a,l="json";if(null!=c)switch(f=r.clone(a),f.Accept=c,c){case"application/json":break;case"appplication/xml":case"text/xml":l="xml";break;default:l="text"}if(i("host-browser")&&!u(e)){var d=new n;return t(["dojo/request/script"],function(t){var r=new RegExp("[?&]format=");r.test(e)||(e+=(~e.indexOf("?")?"&":"?")+"format=application/json"),t.get(e,{jsonp:"callback"}).then(function(e){d.resolve(e)},function(e){d.reject(e)})}),d}var d=o.get(e,{preventCache:!0,handleAs:l,headers:f,withCredentials:!0,timeout:s}).response.then(function(e){if(200===e.status)return e.data;throw"Resource could not be loaded: "+e.text});return d},post:function(e,t,n,i){var u=r.clone(a);return n&&(u["If-Unmodified-Since"]=n.toUTCString()),i&&(u["Content-Type"]=i),o.post(e,{preventCache:!0,data:t,headers:u,withCredentials:!0,timeout:s})},create:function(e,t){var r=new n;return c.post(e,t).response.then(function(t){var n=t.getHeader("Location");if(!n&&t.data){var o=e.indexOf("?");n=o!==-1?e.substr(0,e.indexOf("?")):e,n+="/entry/"+JSON.parse(t.data).entryId}r.resolve(n)},function(e){r.reject(e)}),r.promise},put:function(e,t,n,i){var u=r.clone(a);return n&&(u["If-Unmodified-Since"]=n.toUTCString()),i?u["Content-Type"]=i:r.isObject(t)&&(u["Content-Type"]=i),o.put(e,{preventCache:!0,data:t,headers:u,withCredentials:!0,timeout:s})},del:function(e,t){var n=r.clone(a);return t&&(n["If-Unmodified-Since"]=t.toUTCString()),o.del(e,{preventCache:!0,headers:n,withCredentials:!0,timeout:s})},putFile:function(e,t,r){throw"Currently not supported in a non-browser environment!"}};return i("host-browser")&&t(["dojo/_base/window","dojo/request/iframe"],function(e,t){c.putFile=function(r,n,o){if(n.value){var a;i("ie")?(a=document.createElement('<form enctype="multipart/form-data" method="post">'),a.encoding="multipart/form-data"):(a=document.createElement("form"),a.setAttribute("enctype","multipart/form-data"),a.setAttribute("method","post"),a.style.display="none");var s=n.parentElement,u=n.nextSibling;a.appendChild(n),e.body().appendChild(a);var c=function(){u?s.insertBefore(n,u):s.appendChild(n),e.body().removeChild(a)};return t(r,{preventCache:!0,handleAs:o||"json",form:a}).then(function(e){return c(),e},function(e){throw c(),e})}}}),c}),define("store/Group",["store/List","store/terms","dojo/json","dojo/_base/lang"],function(e,t,r,n){var o=function(t,r,n){e.apply(this,arguments)},i=function(){};return i.prototype=e.prototype,o.prototype=new i,o.prototype.getName=function(){return this._name},o.prototype.setName=function(e){var t=this._name;return this._name=e,this._entryStore.handleAsync(this._entryStore.getREST().put(this.getEntryURI()+"/name",r.stringify({name:e})).then(n.hitch(this,function(e){var t=this.getEntry(!0);return t&&(t.getEntryInfo()._name=e),e}),n.hitch(this,function(e){throw this._name=t,e})),"setGroupName")},o.prototype.getHomeContext=function(){var e=this.getEntryStore(),r=this.getEntry(!0),n=r.getEntryInfo().getGraph().findFirstValue(r.getResourceURI(),t.homeContext);if(null!=n)return e.getEntryId(n)},o.prototype.setHomeContext=function(e,r){var n=this.getEntryStore(),o=n.getResourceURI("_contexts",e),i=this.getEntry(!0),a=i.getEntryInfo().getGraph();if(a.findAndRemove(i.getResourceURI(),t.homeContext),a.add(i.getResourceURI(),t.homeContext,{type:"uri",value:o}),r!==!0)return i.getEntryInfo().commit()},o.prototype._update=function(t,r){e.prototype._update.apply(this,arguments),this._name=t.name},o}),define("store/File",["dojo/json","dojo/has","dojo/_base/lang","store/Resource","store/factory"],function(e,t,r,n,o){var i=function(e,t,r){n.apply(this,arguments)},a=function(){};return a.prototype=n.prototype,i.prototype=new a,i.prototype.putFile=function(e){if(t("host-browser")&&e instanceof Node){if(null==e.name||""===e.name)throw"Failure, cannot upload resource from input element unless a name attribute is provided.";var r=o.getPutFileURI(this.getResourceURI()),n=this.getEntry(!0),i=this.getEntryStore(),a=function(e){return n.setRefreshNeeded(),e};return i.handleAsync(i.getREST().putFile(r,e).then(a),"putFile")}},i.prototype.put=function(e,t){var r=this.getEntryStore();return r.handleAsync(r.getREST().put(this.getResourceURI(),e,null,t),"putFile")},i.prototype.putText=function(e){return this.put(e,"text/plain")},i.prototype.putJSON=function(t){return this.put(e.stringify(t))},i.prototype.putXML=function(e){if(t("host-browser")&&e instanceof Document)try{e=(new XMLSerializer).serializeToString(e)}catch(t){try{e=e.xml}catch(e){throw"Xmlserializer not supported"}}else if(!r.isString(e))throw"Unsupported format of parameter xml to method putAsXML";return this.put(e,"text/xml")},i.prototype.get=function(e){var t=this.getEntry(!0).getEntryInfo().getFormat(),r=this.getEntryStore();return r.handleAsync(r.getREST().get(this.getResourceURI(),t),"getFile")},i.prototype.getText=function(){var e=this.getEntryStore();return e.handleAsync(this.getEntryStore().getREST().get(this.getResourceURI(),"text/plain"),"getFile")},i.prototype.getJSON=function(){var e=this.getEntryStore();return e.handleAsync(e.getREST().get(this.getResourceURI(),"application/json"),"getFile")},i.prototype.getXML=function(){var e=this.getEntryStore();return e.handleAsync(e.getREST().get(this.getResourceURI(),"text/xml"),"getFile")},i}),define("store/User",["dojo/json","dojo/_base/lang","store/Resource"],function(e,t,r){var n=function(e,t,n,o){r.apply(this,arguments),this._data=o},o=function(){};return o.prototype=r.prototype,n.prototype=new o,n.prototype.getName=function(){return this._data.name},n.prototype.setName=function(r){var n=this._data.name;this._data.name=r;var o=this._entryStore;return o.handleAsync(o.getREST().put(this._resourceURI,e.stringify({name:r})).then(t.hitch(this,function(e){var t=this.getEntry(!0);return t&&(t.getEntryInfo()._name=e),e}),t.hitch(this,function(e){throw this._data.name=n,e})),"setUserName")},n.prototype.getLanguage=function(){return this._data.language},n.prototype.setLanguage=function(r){var n=this._data.language;this._data.language=r;var o=this._entryStore;return o.handleAsync(o.getREST().put(this._resourceURI,e.stringify({language:r})).then(function(e){return e},t.hitch(this,function(e){throw this._data.language=n,e})),"setUserLanguage")},n.prototype.setPassword=function(t){var r=this._entryStore;return r.handleAsync(r.getREST().put(this._resourceURI,e.stringify({password:t})),"setUserPassword")},n.prototype.getHomeContext=function(){return this._data.homecontext},n.prototype.setHomeContext=function(r){var n=this._data.homecontext;this._data.homecontext=r;var o=this._entryStore;return o.handleAsync(o.getREST().put(this._resourceURI,e.stringify({homecontext:r})).then(function(e){return e},t.hitch(this,function(e){throw this._data.homecontext=n,e})),"setUserHomeContext")},n.prototype.getCustomProperties=function(){return this._data.customProperties||{}},n.prototype.setCustomProperties=function(r){var n=this._data.customProperties;this._data.customProperties=r;var o=this._entryStore;return o.handleAsync(o.getREST().put(this._resourceURI,e.stringify({customProperties:r})).then(function(e){return e},t.hitch(this,function(e){throw this._data.customProperties=n,e})),"setUserCustomProperties")},n.prototype.getSource=function(){return this._data},n}),define("store/factory",["store/String","store/types","dojo/json","dojo/_base/array","store/Context","store/EntryInfo","store/Entry","store/List","store/Group","store/SearchList","store/Graph","store/File","store/Pipeline","rdfjson/Graph","store/User","exports"],function(e,t,r,n,o,i,a,s,u,c,f,l,d,p,h,g){var y=g,m={sortBy:"title",prio:"List"},v=50,_=function(e,t){var r=t.getBaseURI(),n=e.substr(r.length,e.indexOf("/",r.length)-r.length),i=t.getCachedContextsIdx(),a=i[n];return a||(a=new o(r+"_contexts/entry/"+n,r+n,t),i[n]=a),a},b=function(e){for(var t={},r=e||[],n=0;n<r.length;n++)t[r[n]]=!0;return t},E=function(e,t){"string"==typeof t.name&&null!=e&&(e instanceof h?(e._data=e._data||{},e._data.name=t.name):e._name=t.name)},R=function(r,o,i){o=o||{};var a=r.getResource(!0),c=r.getEntryInfo();if(!a&&c.getEntryType()===t.ET_LOCAL&&c.getResourceType()===t.RT_INFORMATIONRESOURCE){switch(r.getEntryInfo().getGraphType()){case t.GT_CONTEXT:var p=r.getEntryStore().getBaseURI()+r.getId()+"/";a=_(p,r.getEntryStore()),a._update(o);break;case t.GT_LIST:case t.GT_GROUP:a=r.isGroup()?new u(r.getURI(),r.getResourceURI(),r.getEntryStore()):new s(r.getURI(),r.getResourceURI(),r.getEntryStore());var g=r.getContext().getResourceURI()+"/entry/";if(o.resource&&o.resource.children){var m=n.map(o.resource.children,function(e){return y.updateOrCreate(g+e.entryId,e,r.getEntryStore())});a._update(o.resource,m)}break;case t.GT_USER:(i||null!=o.resource)&&(a=new h(r.getURI(),r.getResourceURI(),r.getEntryStore(),o.resource||{}));break;case t.GT_STRING:(i||null!=o.resource)&&(a=new e(r.getURI(),r.getResourceURI(),r.getEntryStore(),o.resource||""));break;case t.GT_GRAPH:(i||null!=o.resource)&&(a=new f(r.getURI(),r.getResourceURI(),r.getEntryStore(),o.resource||{}));break;case t.GT_PIPELINE:(i||null!=o.resource)&&(a=new d(r.getURI(),r.getResourceURI(),r.getEntryStore(),o.resource||{}));break;case t.GT_PIPELINERESULT:case t.GT_NONE:a=new l(r.getURI(),r.getResourceURI(),r.getEntryStore())}return r._resource=a,void E(a,o)}if(null==a||null==o.resource)return void E(a,o);if(a._update)if(r.isList()||r.isGroup()){var g=r.getContext().getResourceURI()+"/entry/";if(o.resource&&o.resource.children){var m=n.map(o.resource.children,function(e){return y.updateOrCreate(g+e.entryId,e,r.getEntryStore())});a._update(o.resource,m)}}else a._update(o.resource)},w=function(e,t){if(e._metadata=t.metadata?new p(t.metadata):null,e._cachedExternalMetadata=t["cached-external-metadata"]?new p(t["cached-external-metadata"]):null,e._extractedMetadata=t["extracted-metadata"]?new p(t["extracted-metadata"]):null,e._relation=t.relations?new p(t.relations):new p,e._rights=b(t.rights),t.name||t.resource&&t.resource.name){var r=e.getEntryInfo();r._name=t.name||t.resource.name}return e};return y.getContext=function(e,t){var r=e.getBaseURI(),n=r+"_contexts/entry/",i=t.substr(n.length),a=e.getCachedContextsIdx(),s=a[i];return s||(s=new o(t,r+i,e),a[i]=s),s},y.getList=function(e,t){var r=e.getCache(),n=r.get(t);if(!n){var o=new i(t,new p,e);n=new a(_(t,e),o,e);var u=t.replace("/entry/","/resource/");n._resource=new s(t,u,e),r.cache(n,!0),n.setRefreshNeeded(!0)}return n._resource},y.updateOrCreate=function(e,t,r){var n=r.getCache(),o=n.get(e);if(o)o.getEntryInfo().setGraph(new p(t.info));else{var s=new i(e,new p(t.info),r);o=new a(_(e,r),s)}return w(o,t),R(o,t),n.cache(o),o},y.updateOrCreateResource=R,y.update=function(e,t){e.getEntryInfo().setGraph(new p(t.info)),R(e,t),w(e,t),e.getEntryStore().getCache().cache(e)},y.createSearchList=function(e,t){return new c(e,t)},y.extractSearchResults=function(e,t,r){e.resource.offset=e.resource.offset||e.offset,e.resource.size=e.resource.size||e.results;var o=r.getBaseURI(),i=n.map(e.resource.children,function(e){return y.updateOrCreate(o+e.contextId+"/entry/"+e.entryId,e,r)});return t._update(e.resource,i),i},y.getMetadataURI=function(e){return e.replace("/entry/","/metadata/")},y.getCachedExternalMetadataURI=function(e){return e.replace("/entry/","/cached-external-metadata/")},y.getId=function(e){return e.substr(e.lastIndexOf("/")+1)},y.getEntryId=function(e,t){t&&(e=e.substr(t.length-1));var r=e.match(/\/([^\/]+)\/(entry|resource|metadata|relation)\/([^\?\/]+)(\?.*)?$/);return r?r[3]:0===e.lastIndexOf("/")?e.substr(1):t?void 0:e.substr(e.lastIndexOf("/")+1)},y.getContextId=function(e,t){t&&(e=e.substr(t.length-1));var r=e.match(/\/([^\/]+)\/(entry|resource|metadata|relation)\/([^\?\/]+)(\?.*)?$/);return r?r[1]:e.indexOf("/")!==-1&&t?void 0:"_contexts"},y.getEntryURIFromURI=function(e,t){var r=e.getBaseURI();return r+y.getContextId(t,r)+"/entry/"+y.getEntryId(t,r)},y.getEntryURI=function(e,t,r){return e.getBaseURI()+t+"/entry/"+r},y.getResourceBase=function(e,t){return e.getBaseURI()+t+"/resource/"},y.getResourceURI=function(e,t,r){return"_contexts"===t?e.getBaseURI()+r:e.getBaseURI()+t+"/resource/"+r},y.getURIFromCreated=function(e,t){return t.getResourceURI()+"/entry/"+e.entryId},y.getEntryLoadURI=function(e,t){t=t||{};var r="";r=t.limit>0||t.limit===-1?"&limit="+t.limit:"&limit="+v;var n=null==t.offset||0===t.offset?"":"&offset="+t.offset,o=null==t.sort?m:t.sort,i="",a="",s="";return null!=o&&(i=null==o.sortBy?"":"&sort="+o.sortBy,a=o.descending===!0?"&order=desc":"",s=null==o.prio?"":"&prio="+o.prio),e+"?includeAll"+r+n+i+a+s},y.getEntryCreateURI=function(e,r){var n=e.getContext().getResourceURI()+"?";if(e){var o=e.getEntryInfo();null!=e.getSpecificId()&&(n=n+"id="+e.getSpecificId()+"&"),e.isLink()&&(n=n+"resource="+encodeURIComponent(e.getResourceURI())+"&"),(e.isReference()||e.isLinkReference())&&(n=n+"resource="+encodeURIComponent(e.getResourceURI())+"&",n=n+"cached-external-metadata="+encodeURIComponent(o.getExternalMetadataURI())+"&"),o.getEntryType()!==t.ET_LOCAL&&(n=n+"entrytype="+o.getEntryType().toLowerCase()+"&"),o.getResourceType()!==t.RT_INFORMATIONRESOURCE&&(n+="informationresource=false&"),o.getGraphType()!=t.GT_NONE&&(n=n+"graphtype="+o.getGraphType().toLowerCase()+"&")}return r&&(n=n+"list="+r.getResourceURI()+"&"),n.slice(0,-1)},y.getEntryCreatePostData=function(e){var t={},n=!0,o=e.getMetadata();null==o||o.isEmpty()||(t.metadata=o.exportRDFJSON(),n=!1);var i=e.getResource(!0);null!=i&&null!=i.getSource&&(t.resource=i.getSource(),n=!1);var a=e.getEntryInfo().getGraph();null==a||a.isEmpty()||(t.info=a.exportRDFJSON(),n=!1);var s=e.getCachedExternalMetadata();return null==s||s.isEmpty()||(t["cached-external-metadata"]=s.exportRDFJSON(),n=!1),n?"":r.stringify(t)},y.getMoveURI=function(e,t,r,n){var o=e.getURI().substr(n.length),i=t.getResourceURI().substr(n.length);return r.getResourceURI()+"?moveEntry="+o+"&fromList="+i},y.getProxyURI=function(e,t,r){var n=e+"proxy?url="+encodeURIComponent(t);return null!=r&&(n+="&fromFormat="+r),n},y.getPutFileURI=function(e){return e+(e.indexOf("?")<0?"?":"&")+"method=put&textarea=true"},y.setSort=function(e){m=e},y.getSort=function(){return m},y.getDefaultLimit=function(){return v},y.setDefaultLimit=function(e){v=e},y}),define("store/Auth",["dojo/Deferred"],function(e){var t=function(e){this.entrystore=e,this._listenerCounter=0,this._listenersIdx={}};t.prototype.messageListeners=function(e,t){for(var r in this._listenersIdx)this._listenersIdx.hasOwnProperty(r)&&this._listenersIdx[r](e,t)};var r=0;return t.prototype.addAuthListener=function(e){null==e.__alid&&(e.__alid="idx_"+r,r++),this._listenersIdx[e.__alid]=e},t.prototype.removeAuthListener=function(e){null!=e.__alid&&delete this._listenersIdx[e.__alid]},t.prototype.getUserInfo=function(t){if(this.userInfo&&t!==!0){var r=new e;return r.resolve(this.userInfo),r.promise}if(!this._uiDef){var n=this;delete this.userInfo,this._uiDef=this.entrystore._rest.get(this.entrystore._baseURI+"auth/user").then(function(e){return n.userInfo=e,delete n._uiDef,e}),this.entrystore.handleAsync(this._uiDef,"getUserInfo")}return this._uiDef},t.prototype.getUserEntry=function(t){if(this.userEntry&&t!==!0){var r=new e;return r.resolve(this.userEntry),r.promise}if(!this._ueDef){var n=this;delete this.userEntry,this._ueDef=this.getUserInfo(t).then(function(e){return n.entrystore.getEntry(n.entrystore.getEntryURI("_principals",e.id),{asyncContext:"getUserEntry"})}).then(function(e){return n.userEntry=e,delete n._ueDef,e})}return this._ueDef},t.prototype.login=function(e,t,r){if(this.userInfo&&this.userInfo.user===e)return this.getUserInfo();var n=this,o={base:this.entrystore.getBaseURI(),user:e,password:t,maxAge:r};return this.entrystore.handleAsync(this.entrystore.getREST().auth(o).then(function(e){return"object"==typeof e&&e.user?e:n.entrystore._rest.get(n.entrystore._baseURI+"auth/user")}).then(function(e){return n._uiDef&&n._uiDef.cancel(),n._ueDef&&n._ueDef.cancel(),n.userInfo=e,delete n.userEntry,n.entrystore.getCache().allNeedRefresh(),n.messageListeners("login",e),e}),"login")},t.prototype.logout=function(){if(this.userInfo&&"guest"===this.userInfo.user)return this.getUserInfo();var e={base:this.entrystore.getBaseURI(),logout:!0},t=this;return this.entrystore.handleAsync(this.entrystore.getREST().auth(e).then(function(){return t.userInfo={user:"guest",id:"_guest"},delete t.userEntry,t.entrystore.getCache().allNeedRefresh(),t.messageListeners("logout",t.userInfo),t.userInfo}),"logout")},t}),define("store/EntryStore",["dojo/_base/lang","dojo/json","dojo/Deferred","store/solr","store/Cache","store/rest","store/factory","store/types","store/PrototypeEntry","store/Resource","store/User","store/Auth","dojo/has"],function(e,t,r,n,o,i,a,s,u,c,f,l,d){var p=function(e,t){d("host-browser")&&null==e?this._baseURI=window.location.origin+"/store/":(this._baseURI=e,"/"!==this._baseURI[this._baseURI.length-1]&&(this._baseURI=this._baseURI+"/")),this._cache=new o,this._auth=new l(this),t&&this.auth(t),this._contexts={},this._rest=i};return p.prototype.addAsyncListener=function(e){this.asyncListeners?this.asyncListeners.push(e):this.asyncListeners=[e]},p.prototype.removeAsyncListener=function(e){this.asyncListeners&&this.asyncListeners.splice(this.asyncListeners.indexOf(e),1)},p.prototype.handleAsync=function(e,t){if(this.asyncListeners)for(var r=0;r<this.asyncListeners.length;r++)this.asyncListeners[r](e,t);return e},p.prototype.getAuth=function(){return this._auth},p.prototype.getUserInfo=function(){return this._auth.getUserInfo()},p.prototype.getUserEntry=function(){return this._auth.getUserEntry()},p.prototype.auth=function(e){return null==e?this._auth.logout():this._auth.login(e.user,e.password,e.maxAge)},p.prototype.logout=function(){return this._auth.logout()},p.prototype.getEntry=function(e,t){var r=!!t&&t.forceLoad===!0,n=this._cache.get(e),o="getEntry";if(null!=t&&(t.asyncContext&&(o=t.asyncContext),t.direct===!0))return n;var i=function(e){return null!=t&&t.loadResource&&null==e.getResource()?e.getResource().then(function(){return e}):e};if(n&&!r){if((n.isList()||n.isGroup())&&null!=t){var s=n.getResource(!0);s.setLimit(t.limit),s.setSort(t.sort)}return this.handleAsync(n.refresh().then(i),o)}var u=this,c=a.getEntryLoadURI(e,t);return this.handleAsync(this._rest.get(c).then(function(t){var r=a.updateOrCreate(e,t,u);return i(r)},function(e){throw"Failed fetching entry. "+e}),o)},p.prototype.getListEntries=function(e,t,n,o){var i=new r,s={};return null!=t&&(s.sort=t),n%1===0&&(s.limit=n),o%1===0&&(n%1===0?s.offset=n*o:s.offset=a.getDefaultLimit()*o),this.getEntryStore().getEntry(e,s).then(function(e){var t=e.getResource(!0);t.getEntries(o).then(function(e){i.resolve(e,t)},function(e){i.reject(e)})},function(e){i.reject(e)}),i.promise},p.prototype.getContextById=function(e){return a.getContext(this,this._baseURI+"_contexts/entry/"+e)},p.prototype.getContext=function(e){return a.getContext(this,e)},p.prototype.getContextList=function(){return this.newSolrQuery().graphType(s.GT_CONTEXT).list()},p.prototype.getPrincipalList=function(){return this.newSolrQuery().graphType([s.GT_USER,s.GT_GROUP]).list()},p.prototype.createEntry=function(t){var r=a.getEntryCreateURI(t,t.getParentList()),n=a.getEntryCreatePostData(t);return this.handleAsync(this._rest.create(r,n).then(e.hitch(this,function(e){var r=t.getParentList();if(null!=r){var n=r.getResource(!0);null!=n&&n.needRefresh&&r.getResource(!0).needRefresh()}return this.getEntry(e)})),"createEntry")},p.prototype.newContext=function(e,t){var r=a.getContext(this,this._baseURI+"_contexts/entry/_contexts"),n=new u(r,t).setGraphType(s.GT_CONTEXT);if(null!=e){var o=n.getEntryInfo(),i=new c(o.getEntryURI(),o.getResourceURI(),this);i._update({name:e}),n._resource=i}return n},p.prototype.createGroupAndContext=function(t){var r=this._baseURI+"_principals/groups";return null!=t&&(r+="?name="+encodeURIComponent(t)),this.handleAsync(this._rest.create(r).then(e.hitch(this,function(e){return this.getEntry(e)})),"createGroupAndContext")},p.prototype.newUser=function(e,t,r,n){var o=a.getContext(this,this._baseURI+"_contexts/entry/_principals"),i=new u(o,n).setGraphType(s.GT_USER),c=i.getEntryInfo(),l={};null!=e&&(l.name=e),null!=t&&(l.password=t),null!=r&&(l.homecontext=r);var d=new f(c.getEntryURI(),c.getResourceURI(),this,l);return i._resource=d,i},p.prototype.newGroup=function(e,t){var r=a.getContext(this,this._baseURI+"_contexts/entry/_principals"),n=new u(r,t).setGraphType(s.GT_GROUP);if(null!=e){var o=n.getEntryInfo(),i=new c(o.getEntryURI(),o.getResourceURI(),this);i._update({name:e}),n._resource=i}return n},p.prototype.moveEntry=function(e,t,r){var n=a.getMoveURI(e,t,r,this._baseURI);return this.handleAsync(this._rest.post(n,""),"moveEntry")},p.prototype.loadViaProxy=function(e,t){var r=a.getProxyURI(this._baseURI,e);return this.handleAsync(this._rest.get(r,t),"loadViaProxy")},p.prototype.echoFile=function(e,t){if(!(e instanceof Node))throw"Argument needs to be an input element.";if(null==e.name||""===e.name)throw"Failure, cannot upload resource from input element unless a name attribute is provided.";return this.handleAsync(this.getREST().putFile(this.getBaseURI()+"echo",e,t),"echoFile")},p.prototype.newSolrQuery=function(){return new n.Solr(this)},p.prototype.createSearchList=function(e){return a.createSearchList(this,e)},p.prototype.getEntryURI=function(e,t){return a.getEntryURI(this,e,t)},p.prototype.getEntryURIFromURI=function(e){return a.getEntryURIFromURI(this,e)},p.prototype.getResourceURI=function(e,t){return a.getResourceURI(this,e,t)},p.prototype.getBaseURI=function(){return this._baseURI},p.prototype.getEntryId=function(e){return a.getEntryId(e,this.getBaseURI())},p.prototype.getContextId=function(e){return a.getContextId(e,this.getBaseURI())},p.prototype.getCache=function(){return this._cache},p.prototype.getREST=function(){return this._rest},p.prototype.getCachedContextsIdx=function(){return this._contexts},p.prototype.info=function(){require(["dojo/text!package.json"],function(e){var r=t.parse(e);return{version:r.version}})},p.prototype.getFactory=function(){return a},p}),define("dojo/dom",["./sniff","./_base/window","./_base/kernel"],function(e,t,r){if(e("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}var n={};e("ie")?n.byId=function(e,r){if("string"!=typeof e)return e;var n=r||t.doc,o=e&&n.getElementById(e);if(o&&(o.attributes.id.value==e||o.id==e))return o;var i=n.all[e];i&&!i.nodeName||(i=[i]);for(var a=0;o=i[a++];)if(o.attributes&&o.attributes.id&&o.attributes.id.value==e||o.id==e)return o}:n.byId=function(e,r){return("string"==typeof e?(r||t.doc).getElementById(e):e)||null};var o=r.global.document||null;e.add("dom-contains",!(!o||!o.contains)),n.isDescendant=e("dom-contains")?function(e,t){return!(!(t=n.byId(t))||!t.contains(n.byId(e)))}:function(e,t){try{for(e=n.byId(e),t=n.byId(t);e;){if(e==t)return!0;e=e.parentNode}}catch(e){}return!1},e.add("css-user-select",function(e,t,r){if(!r)return!1;var n=r.style,o=["Khtml","O","Moz","Webkit"],i=o.length,a="userSelect";do if("undefined"!=typeof n[a])return a;while(i--&&(a=o[i]+"UserSelect"));return!1});var i=e("css-user-select");return n.setSelectable=i?function(e,t){n.byId(e).style[i]=t?"":"none"}:function(e,t){e=n.byId(e);var r=e.getElementsByTagName("*"),o=r.length;if(t)for(e.removeAttribute("unselectable");o--;)r[o].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");o--;)r[o].setAttribute("unselectable","on")},n}),define("dojo/aspect",[],function(){"use strict";function e(e,t,r,n){var o,i=e[t],a="around"==t;if(a){var s=r(function(){return i.advice(this,arguments)});o={remove:function(){s&&(s=e=r=null)},advice:function(e,t){return s?s.apply(e,t):i.advice(e,t)}}}else o={remove:function(){if(o.advice){var n=o.previous,i=o.next;i||n?(n?n.next=i:e[t]=i,i&&(i.previous=n)):delete e[t],e=r=o.advice=null}},id:e.nextId++,advice:r,receiveArguments:n};if(i&&!a)if("after"==t){for(;i.next&&(i=i.next););i.next=o,o.previous=i}else"before"==t&&(e[t]=o,o.next=i,i.previous=o);else e[t]=o;return o}function t(t){return function(n,o,i,a){var s,u=n[o];u&&u.target==n||(n[o]=s=function(){for(var e=s.nextId,t=arguments,n=s.before;n;)n.advice&&(t=n.advice.apply(this,t)||t),n=n.next;if(s.around)var o=s.around.advice(this,t);for(var i=s.after;i&&i.id<e;){
if(i.advice)if(i.receiveArguments){var a=i.advice.apply(this,t);o=a===r?o:a}else o=i.advice.call(this,o,t);i=i.next}return o},u&&(s.around={advice:function(e,t){return u.apply(e,t)}}),s.target=n,s.nextId=s.nextId||0);var c=e(s||u,t,i,a);return i=null,c}}var r,n=t("after"),o=t("before"),i=t("around");return{before:o,around:i,after:n}}),define("dojo/on",["./aspect","./_base/kernel","./sniff"],function(e,t,r){"use strict";function n(e,t,n,o,i){var a=t.match(/(.*):(.*)/);if(a)return t=a[2],a=a[1],s.selector(a,t).call(i,e,n);if(r("touch")&&(u.test(t)&&(n=w(n)),r("event-orientationchange")||"orientationchange"!=t||(t="resize",e=window,n=w(n))),p&&(n=p(n)),e.addEventListener){var c=t in l,f=c?l[t]:t;return e.addEventListener(f,n,c),{remove:function(){e.removeEventListener(f,n,c)}}}if(t="on"+t,m&&e.attachEvent)return m(e,t,n);throw new Error("Target must be an event emitter")}function o(){this.cancelable=!1,this.defaultPrevented=!0}function i(){this.bubbles=!1}if(r("dom")){var a=window.ScriptEngineMajorVersion;r.add("jscript",a&&a()+ScriptEngineMinorVersion()/10),r.add("event-orientationchange",r("touch")&&!r("android")),r.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),r.add("event-focusin",function(e,t,r){return"onfocusin"in r}),r("touch")&&r.add("touch-can-modify-event-delegate",function(){var e=function(){};e.prototype=document.createEvent("MouseEvents");try{var t=new e;return t.target=null,null===t.target}catch(e){return!1}})}var s=function(e,t,r,o){return"function"!=typeof e.on||"function"==typeof t||e.nodeType?s.parse(e,t,r,n,o,this):e.on(t,r)};s.pausable=function(e,t,r,n){var o,i=s(e,t,function(){if(!o)return r.apply(this,arguments)},n);return i.pause=function(){o=!0},i.resume=function(){o=!1},i},s.once=function(e,t,r,n){var o=s(e,t,function(){return o.remove(),r.apply(this,arguments)});return o},s.parse=function(e,t,r,n,o,i){var a;if(t.call)return t.call(i,e,r);if(t instanceof Array?a=t:t.indexOf(",")>-1&&(a=t.split(/\s*,\s*/)),a){for(var u,c=[],f=0;u=a[f++];)c.push(s.parse(e,u,r,n,o,i));return c.remove=function(){for(var e=0;e<c.length;e++)c[e].remove()},c}return n(e,t,r,o,i)};var u=/^touch/;s.matches=function(e,r,n,o,i){for(i=i&&"function"==typeof i.matches?i:t.query,o=o!==!1,1!=e.nodeType&&(e=e.parentNode);!i.matches(e,r,n);)if(e==n||o===!1||!(e=e.parentNode)||1!=e.nodeType)return!1;return e},s.selector=function(e,t,r){return function(n,o){function i(t){return s.matches(t,e,n,r,a)}var a="function"==typeof e?{matches:e}:this,u=t.bubble;return u?s(n,u(i),o):s(n,t,function(e){var t=i(e.target);if(t)return e.selectorTarget=t,o.call(t,e)})}};var c=[].slice,f=s.emit=function(e,t,r){var n=c.call(arguments,2),a="on"+t;if("parentNode"in e){var s=n[0]={};for(var u in r)s[u]=r[u];s.preventDefault=o,s.stopPropagation=i,s.target=e,s.type=t,r=s}do e[a]&&e[a].apply(e,n);while(r&&r.bubbles&&(e=e.parentNode));return r&&r.cancelable&&r},l=r("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!r("event-stopimmediatepropagation"))var d=function(){this.immediatelyStopped=!0,this.modified=!0},p=function(e){return function(t){if(!t.immediatelyStopped)return t.stopImmediatePropagation=d,e.apply(this,arguments)}};if(r("dom-addeventlistener"))s.emit=function(e,t,r){if(e.dispatchEvent&&document.createEvent){var n=e.ownerDocument||document,o=n.createEvent("HTMLEvents");o.initEvent(t,!!r.bubbles,!!r.cancelable);for(var i in r)i in o||(o[i]=r[i]);return e.dispatchEvent(o)&&o}return f.apply(s,arguments)};else{s._fixEvent=function(e,t){if(!e){var r=t&&(t.ownerDocument||t.document||t).parentWindow||window;e=r.event}if(!e)return e;try{h&&e.type==h.type&&e.srcElement==h.target&&(e=h)}catch(e){}if(!e.target)switch(e.target=e.srcElement,e.currentTarget=t||e.srcElement,"mouseover"==e.type&&(e.relatedTarget=e.fromElement),"mouseout"==e.type&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=_,e.preventDefault=b),e.type){case"keypress":var n="charCode"in e?e.charCode:e.keyCode;10==n?(n=0,e.keyCode=13):13==n||27==n?n=0:3==n&&(n=99),e.charCode=n,v(e)}return e};var h,g=function(e){this.handle=e};g.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var y=function(e){return function(t){t=s._fixEvent(t,this);var r=e.call(this,t);return t.modified&&(h||setTimeout(function(){h=null}),h=t),r}},m=function(t,n,o){if(o=y(o),((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||r("jscript")<5.8)&&!r("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var i=t[n];if(!i||!i.listeners){var a=i;i=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),i.listeners=[],t[n]=i,i.global=this,a&&i.listeners.push(_dojoIEListeners_.push(a)-1)}var s;return i.listeners.push(s=i.global._dojoIEListeners_.push(o)-1),new g(s)}return e.after(t,n,o,!0)},v=function(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode},_=function(){this.cancelBubble=!0},b=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(r("touch"))var E=function(){},R=window.orientation,w=function(e){return function(t){var n=t.corrected;if(!n){var o=t.type;try{delete t.type}catch(e){}if(t.type){if(r("touch-can-modify-event-delegate"))E.prototype=t,n=new E;else{n={};for(var i in t)n[i]=t[i]}n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()}}else n=t,n.type=o;if(t.corrected=n,"resize"==o)return R==window.orientation?null:(R=window.orientation,n.type="orientationchange",e.call(this,n));if("rotation"in n||(n.rotation=0,n.scale=1),window.TouchEvent&&t instanceof TouchEvent){var a=n.changedTouches[0];for(var s in a)delete n[s],n[s]=a[s]}}return e.call(this,n)}};return s}),define("dojo/selector/acme",["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(e,t,r,n,o){var i=n.trim,a=r.forEach,s=function(){return o.doc||{firstChild:{},compatMode:"CSS1Compat"}},u="BackCompat"==s().compatMode,c=">~+",f=!1,l=function(){return!0},d=function(e){e+=c.indexOf(e.slice(-1))>=0?" * ":" ";for(var t,r,n=function(t,r){return i(e.slice(t,r))},o=[],a=-1,s=-1,u=-1,l=-1,d=-1,p=-1,h=-1,g="",y="",m=0,v=e.length,_=null,b=null,E=function(){if(h>=0){var e=h==m?null:n(h,m);_[c.indexOf(e)<0?"tag":"oper"]=e,h=-1}},R=function(){p>=0&&(_.id=n(p,m).replace(/\\/g,""),p=-1)},w=function(){d>=0&&(_.classes.push(n(d+1,m).replace(/\\/g,"")),d=-1)},x=function(){R(),E(),w()},I=function(){x(),l>=0&&_.pseudos.push({name:n(l+1,m)}),_.loops=_.pseudos.length||_.attrs.length||_.classes.length,_.oquery=_.query=n(r,m),_.otag=_.tag=_.oper?null:_.tag||"*",_.tag&&(_.tag=_.tag.toUpperCase()),o.length&&o[o.length-1].oper&&(_.infixOper=o.pop(),_.query=_.infixOper.query+" "+_.query),o.push(_),_=null};g=y,y=e.charAt(m),m<v;m++)if("\\"!=g)if(_||(r=m,_={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return f?this.otag:this.tag}},h=m),t)y==t&&(t=null);else if("'"!=y&&'"'!=y)if(a>=0){if("]"==y){b.attr?b.matchFor=n(u||a+1,m):b.attr=n(a+1,m);var T=b.matchFor;T&&('"'!=T.charAt(0)&&"'"!=T.charAt(0)||(b.matchFor=T.slice(1,-1))),b.matchFor&&(b.matchFor=b.matchFor.replace(/\\/g,"")),_.attrs.push(b),b=null,a=u=-1}else if("="==y){var S="|~^$*".indexOf(g)>=0?g:"";b.type=S+y,b.attr=n(a+1,m-S.length),u=m+1}}else s>=0?")"==y&&(l>=0&&(b.value=n(s+1,m)),l=s=-1):"#"==y?(x(),p=m+1):"."==y?(x(),d=m):":"==y?(x(),l=m):"["==y?(x(),a=m,b={}):"("==y?(l>=0&&(b={name:n(l+1,m),value:null},_.pseudos.push(b)),s=m):" "==y&&g!=y&&I();else t=y;return o},p=function(e,t){return e?t?function(){return e.apply(window,arguments)&&t.apply(window,arguments)}:e:t},h=function(e,t){var r=t||[];return e&&r.push(e),r},g=function(e){return 1==e.nodeType},y="",m=function(e,t){return e?"class"==t?e.className||y:"for"==t?e.htmlFor||y:"style"==t?e.style.cssText||y:(f?e.getAttribute(t):e.getAttribute(t,2))||y:y},v={"*=":function(e,t){return function(r){return m(r,e).indexOf(t)>=0}},"^=":function(e,t){return function(r){return 0==m(r,e).indexOf(t)}},"$=":function(e,t){return function(r){var n=" "+m(r,e),o=n.lastIndexOf(t);return o>-1&&o==n.length-t.length}},"~=":function(e,t){var r=" "+t+" ";return function(t){var n=" "+m(t,e)+" ";return n.indexOf(r)>=0}},"|=":function(e,t){var r=t+"-";return function(n){var o=m(n,e);return o==t||0==o.indexOf(r)}},"=":function(e,t){return function(r){return m(r,e)==t}}},_=s().documentElement,b=!(_.nextElementSibling||"nextElementSibling"in _),E=b?"nextSibling":"nextElementSibling",R=b?"previousSibling":"previousElementSibling",w=b?g:l,x=function(e){for(;e=e[R];)if(w(e))return!1;return!0},I=function(e){for(;e=e[E];)if(w(e))return!1;return!0},T=function(e){var r=e.parentNode;r=7!=r.nodeType?r:r.nextSibling;var n=0,o=r.children||r.childNodes,i=e._i||e.getAttribute("_i")||-1,a=r._l||("undefined"!=typeof r.getAttribute?r.getAttribute("_l"):-1);if(!o)return-1;var s=o.length;if(a==s&&i>=0&&a>=0)return i;t("ie")&&"undefined"!=typeof r.setAttribute?r.setAttribute("_l",s):r._l=s,i=-1;for(var u=r.firstElementChild||r.firstChild;u;u=u[E])w(u)&&(t("ie")?u.setAttribute("_i",++n):u._i=++n,e===u&&(i=n));return i},S=function(e){return!(T(e)%2)},C=function(e){return T(e)%2},j={checked:function(e,t){return function(e){return!!("checked"in e?e.checked:e.selected)}},disabled:function(e,t){return function(e){return e.disabled}},enabled:function(e,t){return function(e){return!e.disabled}},"first-child":function(){return x},"last-child":function(){return I},"only-child":function(e,t){return function(e){return x(e)&&I(e)}},empty:function(e,t){return function(e){for(var t=e.childNodes,r=e.childNodes.length,n=r-1;n>=0;n--){var o=t[n].nodeType;if(1===o||3==o)return!1}return!0}},contains:function(e,t){var r=t.charAt(0);return'"'!=r&&"'"!=r||(t=t.slice(1,-1)),function(e){return e.innerHTML.indexOf(t)>=0}},not:function(e,t){var r=d(t)[0],n={el:1};"*"!=r.tag&&(n.tag=1),r.classes.length||(n.classes=1);var o=A(r,n);return function(e){return!o(e)}},"nth-child":function(e,t){var r=parseInt;if("odd"==t)return C;if("even"==t)return S;if(t.indexOf("n")!=-1){var n=t.split("n",2),o=n[0]?"-"==n[0]?-1:r(n[0]):1,i=n[1]?r(n[1]):0,a=0,s=-1;if(o>0?i<0?i=i%o&&o+i%o:i>0&&(i>=o&&(a=i-i%o),i%=o):o<0&&(o*=-1,i>0&&(s=i,i%=o)),o>0)return function(e){var t=T(e);return t>=a&&(s<0||t<=s)&&t%o==i};t=i}var u=r(t);return function(e){return T(e)==u}}},U=t("ie")<9||9==t("ie")&&t("quirks")?function(e){var t=e.toLowerCase();return"class"==t&&(e="className"),function(r){return f?r.getAttribute(e):r[e]||r[t]}}:function(e){return function(t){return t&&t.getAttribute&&t.hasAttribute(e)}},A=function(e,t){if(!e)return l;t=t||{};var r=null;return"el"in t||(r=p(r,g)),"tag"in t||"*"!=e.tag&&(r=p(r,function(t){return t&&(f?t.tagName:t.tagName.toUpperCase())==e.getTag()})),"classes"in t||a(e.classes,function(e,t,n){var o=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)");r=p(r,function(e){return o.test(e.className)}),r.count=t}),"pseudos"in t||a(e.pseudos,function(e){var t=e.name;j[t]&&(r=p(r,j[t](t,e.value)))}),"attrs"in t||a(e.attrs,function(e){var t,n=e.attr;e.type&&v[e.type]?t=v[e.type](n,e.matchFor):n.length&&(t=U(n)),t&&(r=p(r,t))}),"id"in t||e.id&&(r=p(r,function(t){return!!t&&t.id==e.id})),r||"default"in t||(r=l),r},O=function(e){return function(t,r,n){for(;t=t[E];)if(!b||g(t)){n&&!Y(t,n)||!e(t)||r.push(t);break}return r}},L=function(e){return function(t,r,n){for(var o=t[E];o;){if(w(o)){if(n&&!Y(o,n))break;e(o)&&r.push(o)}o=o[E]}return r}},N=function(e,t){var n=function(e){var t=[];try{t=Array.prototype.slice.call(e)}catch(o){for(var r=0,n=e.length;r<n;r++)t.push(e[r])}return t};return e=e||l,function(o,i,a){var s,u=0,c=[];for(c=n(o.children||o.childNodes),t&&r.forEach(c,function(e){1===e.nodeType&&(c=c.concat(n(e.getElementsByTagName("*"))))});s=c[u++];)w(s)&&(!a||Y(s,a))&&e(s,u)&&i.push(s);return i}},P=function(e,t){for(var r=e.parentNode;r&&r!=t;)r=r.parentNode;return!!r},M={},k=function(t){var n=M[t.query];if(n)return n;var o=t.infixOper,i=o?o.oper:"",a=A(t,{el:1}),c=t.tag,f="*"==c,d=s().getElementsByClassName;if(i){var p={el:1};f&&(p.tag=1),a=A(t,p),"+"==i?n=O(a):"~"==i?n=L(a):">"==i&&(n=N(a))}else if(t.id)a=!t.loops&&f?l:A(t,{el:1,id:1}),n=function(n,o){var i=e.byId(t.id,n.ownerDocument||n);if(n.ownerDocument&&!P(n,n.ownerDocument)){var s=11===n.nodeType?n.childNodes:[n];r.some(s,function(e){var r=N(function(e){return e.id===t.id},!0)(e,[]);if(r.length)return i=r[0],!1})}if(i&&a(i))return 9==n.nodeType?h(i,o):P(i,n)?h(i,o):void 0};else if(d&&/\{\s*\[native code\]\s*\}/.test(String(d))&&t.classes.length&&!u){a=A(t,{el:1,classes:1,id:1});var g=t.classes.join(" ");n=function(e,t,r){for(var n,o=h(0,t),i=0,s=e.getElementsByClassName(g);n=s[i++];)a(n,e)&&Y(n,r)&&o.push(n);return o}}else f||t.loops?(a=A(t,{el:1,tag:1,id:1}),n=function(e,r,n){for(var o,i=h(0,r),s=0,u=t.getTag(),c=u?e.getElementsByTagName(u):[];o=c[s++];)a(o,e)&&Y(o,n)&&i.push(o);return i}):n=function(e,r,n){for(var o,i=h(0,r),a=0,s=t.getTag(),u=s?e.getElementsByTagName(s):[];o=u[a++];)Y(o,n)&&i.push(o);return i};return M[t.query]=n},D=function(e,t){for(var r,n,o,i,a,s=h(e),u=t.length,c=0;c<u;c++){a=[],r=t[c],n=s.length-1,n>0&&(i={},a.nozip=!0);for(var f=k(r),l=0;o=s[l];l++)f(o,a,i);if(!a.length)break;s=a}return a},F={},q={},G=function(e){var t=d(i(e));if(1==t.length){var r=k(t[0]);return function(e){var t=r(e,[]);return t&&(t.nozip=!0),t}}return function(e){return D(e,t)}},B=t("ie")?"commentStrip":"nozip",V="querySelectorAll",H=!!s()[V],W=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,z=function(e,t,r,n){return r?(t?t+" ":"")+r+(n?" "+n:""):e},X=/([^[]*)([^\]]*])?/g,K=function(e,t,r){return t.replace(W,z)+(r||"")},Q=function(e,r){if(e=e.replace(X,K),H){var n=q[e];if(n&&!r)return n}var o=F[e];if(o)return o;var i=e.charAt(0),a=-1==e.indexOf(" ");e.indexOf("#")>=0&&a&&(r=!0);var s=H&&!r&&c.indexOf(i)==-1&&(!t("ie")||e.indexOf(":")==-1)&&!(u&&e.indexOf(".")>=0)&&e.indexOf(":contains")==-1&&e.indexOf(":checked")==-1&&e.indexOf("|=")==-1;if(s){var f=c.indexOf(e.charAt(e.length-1))>=0?e+" *":e;return q[e]=function(t){if(9==t.nodeType||a)try{var r=t[V](f);return r[B]=!0,r}catch(e){}return Q(e,!0)(t)}}var l=e.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return F[e]=l.length<2?G(e):function(e){for(var t,r=0,n=[];t=l[r++];)n=n.concat(G(t)(e));return n}},J=0,$=t("ie")?function(e){return f?e.getAttribute("_uid")||e.setAttribute("_uid",++J)||J:e.uniqueID}:function(e){return e._uid||(e._uid=++J)},Y=function(e,t){if(!t)return 1;var r=$(e);return t[r]?0:t[r]=1},Z="_zipIdx",ee=function(e){if(e&&e.nozip)return e;if(!e||!e.length)return[];if(e.length<2)return[e[0]];var r=[];J++;var n,o;if(t("ie")&&f){var i=J+"";for(n=0;n<e.length;n++)(o=e[n])&&o.getAttribute(Z)!=i&&(r.push(o),o.setAttribute(Z,i))}else if(t("ie")&&e.commentStrip)try{for(n=0;n<e.length;n++)(o=e[n])&&g(o)&&r.push(o)}catch(e){}else for(n=0;n<e.length;n++)(o=e[n])&&o[Z]!=J&&(r.push(o),o[Z]=J);return r},te=function(e,t){t=t||s();var r=t.ownerDocument||t;f="div"===r.createElement("div").tagName;var n=Q(e)(t);return n&&n.nozip?n:ee(n)};return te.filter=function(t,n,o){for(var i,a=[],s=d(n),u=1!=s.length||/[^\w#\.]/.test(n)?function(t){return r.indexOf(te(n,e.byId(o)),t)!=-1}:A(s[0]),c=0;i=t[c];c++)u(i)&&a.push(i);return a},te}),define("dojo/query",["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","dojo/selector/acme"],function(e,t,r,n,o,i,a){function s(e,t){var n=function(n,o){if("string"==typeof o&&(o=r.byId(o),!o))return new t([]);var i="string"==typeof n?e(n,o):n?n.end&&n.on?n:[n]:[];return i.end&&i.on?i:new t(i)};if(n.matches=e.match||function(e,t,r){return n.filter([e],t,r).length>0},n.filter=e.filter||function(e,t,r){return n(t,r).filter(function(t){return o.indexOf(e,t)>-1})},"function"!=typeof e){var i=e.search;e=function(e,t){return i(t||document,e)}}return n}var u;t.add("array-extensible",function(){return 1==i.delegate([],{length:1}).length&&!t("bug-for-in-skips-shadowed")});var c=Array.prototype,f=c.slice,l=c.concat,d=o.forEach,p=function(e,t,r){var n=new(r||this._NodeListCtor||b)(e);return t?n._stash(t):n},h=function(t,r,n){return r=[0].concat(f.call(r,0)),n=n||e.global,function(e){return r[0]=e,t.apply(n,r)}},g=function(e,t){return function(){return this.forEach(h(e,arguments,t)),this}},y=function(e,t){return function(){return this.map(h(e,arguments,t))}},m=function(e,t){return function(){return this.filter(h(e,arguments,t))}},v=function(t,r,n){return function(){var o=arguments,i=h(t,o,n);return r.call(n||e.global,o)?this.map(i):(this.forEach(i),this)}},_=function(e){var r=this instanceof b&&t("array-extensible");"number"==typeof e&&(e=Array(e));var n=e&&"length"in e?e:arguments;if(r||!n.sort){for(var o=r?this:[],a=o.length=n.length,s=0;s<a;s++)o[s]=n[s];if(r)return o;n=o}return i._mixin(n,E),n._NodeListCtor=function(e){return b(e)},n},b=_,E=b.prototype=t("array-extensible")?[]:{};b._wrap=E._wrap=p,b._adaptAsMap=y,b._adaptAsForEach=g,b._adaptAsFilter=m,b._adaptWithCondition=v,d(["slice","splice"],function(e){var t=c[e];E[e]=function(){return this._wrap(t.apply(this,arguments),"slice"==e?this:null)}}),d(["indexOf","lastIndexOf","every","some"],function(t){var r=o[t];E[t]=function(){return r.apply(e,[this].concat(f.call(arguments,0)))}}),i.extend(_,{constructor:b,_NodeListCtor:b,toString:function(){return this.join(",")},_stash:function(e){return this._parent=e,this},on:function(e,t){var r=this.map(function(r){return n(r,e,t)});return r.remove=function(){for(var e=0;e<r.length;e++)r[e].remove()},r},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(e){var t=f.call(this,0),r=o.map(arguments,function(e){return f.call(e,0)});return this._wrap(l.apply(t,r),this)},map:function(e,t){return this._wrap(o.map(this,e,t),this)},forEach:function(e,t){return d(this,e,t),this},filter:function(e){var t=arguments,r=this,n=0;if("string"==typeof e){if(r=R._filterResult(this,t[0]),1==t.length)return r._stash(this);n=1}return this._wrap(o.filter(r,t[n],t[n+1]),this)},instantiate:function(e,t){var r=i.isFunction(e)?e:i.getObject(e);return t=t||{},this.forEach(function(e){new r(t,e)})},at:function(){var e=new this._NodeListCtor(0);return d(arguments,function(t){t<0&&(t=this.length+t),this[t]&&e.push(this[t])},this),e._stash(this)}});var R=s(a,_);return e.query=s(a,function(e){return _(e)}),R.load=function(e,t,r){u.load(e,t,function(e){r(s(e,_))})},R.load=function(e,t,r){r(s(a,_))},e._filterQueryResult=R._filterResult=function(e,t,r){return new _(R.filter(e,t,r))},e.NodeList=R.NodeList=_,R}),define("dojo/dom-style",["./sniff","./dom","./_base/window"],function(e,t,r){function n(e,t,r){if(t=t.toLowerCase(),"auto"==r){if("height"==t)return e.offsetHeight;if("width"==t)return e.offsetWidth}if("fontweight"==t)switch(r){case 700:return"bold";case 400:default:return"normal"}return t in l||(l[t]=d.test(t)),l[t]?a(e,r):r}var o,i={};o=e("webkit")?function(e){var t;if(1==e.nodeType){var r=e.ownerDocument.defaultView;t=r.getComputedStyle(e,null),!t&&e.style&&(e.style.display="",t=r.getComputedStyle(e,null))}return t||{}}:e("ie")&&(e("ie")<9||e("quirks"))?function(e){return 1==e.nodeType&&e.currentStyle?e.currentStyle:{}}:function(e){if(1===e.nodeType){var t=e.ownerDocument.defaultView,n=t.opener?t:r.global.window;return n.getComputedStyle(e,null)}return{}},i.getComputedStyle=o;var a;a=e("ie")?function(e,t){if(!t)return 0;if("medium"==t)return 4;if(t.slice&&"px"==t.slice(-2))return parseFloat(t);var r=e.style,n=e.runtimeStyle,o=e.currentStyle,i=r.left,a=n.left;n.left=o.left;try{r.left=t,t=r.pixelLeft}catch(e){t=0}return r.left=i,n.left=a,t}:function(e,t){return parseFloat(t)||0},i.toPixelValue=a;var s="DXImageTransform.Microsoft.Alpha",u=function(e,t){try{return e.filters.item(s)}catch(e){return t?{}:null}},c=e("ie")<9||e("ie")<10&&e("quirks")?function(e){try{return u(e).Opacity/100}catch(e){return 1}}:function(e){return o(e).opacity},f=e("ie")<9||e("ie")<10&&e("quirks")?function(e,t){""===t&&(t=1);var r=100*t,n=1===t;if(n?(e.style.zoom="",u(e)&&(e.style.filter=e.style.filter.replace(new RegExp("\\s*progid:"+s+"\\([^\\)]+?\\)","i"),""))):(e.style.zoom=1,u(e)?u(e,1).Opacity=r:e.style.filter+=" progid:"+s+"(Opacity="+r+")",u(e,1).Enabled=!0),"tr"==e.tagName.toLowerCase())for(var o=e.firstChild;o;o=o.nextSibling)"td"==o.tagName.toLowerCase()&&f(o,t);return t}:function(e,t){return e.style.opacity=t},l={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,p={cssFloat:1,styleFloat:1,float:1};return i.get=function(e,r){var o=t.byId(e),a=arguments.length,s="opacity"==r;if(2==a&&s)return c(o);r=p[r]?"cssFloat"in o.style?"cssFloat":"styleFloat":r;var u=i.getComputedStyle(o);return 1==a?u:n(o,r,u[r]||o.style[r])},i.set=function(e,r,n){var o=t.byId(e),a=arguments.length,s="opacity"==r;if(r=p[r]?"cssFloat"in o.style?"cssFloat":"styleFloat":r,3==a)return s?f(o,n):o.style[r]=n;for(var u in r)i.set(e,u,r[u]);return i.getComputedStyle(o)},i}),define("dojo/Evented",["./aspect","./on"],function(e,t){"use strict";function r(){}var n=e.after;return r.prototype={on:function(e,r){return t.parse(this,e,r,function(e,t){return n(e,"on"+t,r,!0)})},emit:function(e,r){var n=[this];return n.push.apply(n,arguments),t.emit.apply(t,n)}},r}),define("dojo/topic",["./Evented"],function(e){var t=new e;return{publish:function(e,r){return t.emit.apply(t,arguments)},subscribe:function(e,r){return t.on.apply(t,arguments)}}}),define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(e,t,r,n){function o(e,t,r,n,o,i){i=i||"px";var a=e.style;isNaN(t)||(a.left=t+i),isNaN(r)||(a.top=r+i),n>=0&&(a.width=n+i),o>=0&&(a.height=o+i)}function i(e){return"button"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&"button"==(e.getAttribute("type")||"").toLowerCase()}function a(e){return"border-box"==s.boxModel||"table"==e.tagName.toLowerCase()||i(e)}var s={};s.boxModel="content-box",e("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(e,t){e=r.byId(e);var o=t||n.getComputedStyle(e),i=n.toPixelValue,a=i(e,o.paddingLeft),s=i(e,o.paddingTop),u=i(e,o.paddingRight),c=i(e,o.paddingBottom);return{l:a,t:s,r:u,b:c,w:a+u,h:s+c}};var u="none";s.getBorderExtents=function(e,t){e=r.byId(e);var o=n.toPixelValue,i=t||n.getComputedStyle(e),a=i.borderLeftStyle!=u?o(e,i.borderLeftWidth):0,s=i.borderTopStyle!=u?o(e,i.borderTopWidth):0,c=i.borderRightStyle!=u?o(e,i.borderRightWidth):0,f=i.borderBottomStyle!=u?o(e,i.borderBottomWidth):0;return{l:a,t:s,r:c,b:f,w:a+c,h:s+f}},s.getPadBorderExtents=function(e,t){e=r.byId(e);var o=t||n.getComputedStyle(e),i=s.getPadExtents(e,o),a=s.getBorderExtents(e,o);return{l:i.l+a.l,t:i.t+a.t,r:i.r+a.r,b:i.b+a.b,w:i.w+a.w,h:i.h+a.h}},s.getMarginExtents=function(e,t){e=r.byId(e);var o=t||n.getComputedStyle(e),i=n.toPixelValue,a=i(e,o.marginLeft),s=i(e,o.marginTop),u=i(e,o.marginRight),c=i(e,o.marginBottom);return{l:a,t:s,r:u,b:c,w:a+u,h:s+c}},s.getMarginBox=function(t,o){t=r.byId(t);var i,a=o||n.getComputedStyle(t),c=s.getMarginExtents(t,a),f=t.offsetLeft-c.l,l=t.offsetTop-c.t,d=t.parentNode,p=n.toPixelValue;return 8!=e("ie")||e("quirks")||d&&(i=n.getComputedStyle(d),f-=i.borderLeftStyle!=u?p(t,i.borderLeftWidth):0,l-=i.borderTopStyle!=u?p(t,i.borderTopWidth):0),{l:f,t:l,w:t.offsetWidth+c.w,h:t.offsetHeight+c.h}},s.getContentBox=function(t,o){t=r.byId(t);var i,a=o||n.getComputedStyle(t),c=t.clientWidth,f=s.getPadExtents(t,a),l=s.getBorderExtents(t,a),d=t.offsetLeft+f.l+l.l,p=t.offsetTop+f.t+l.t;if(c?i=t.clientHeight:(c=t.offsetWidth-l.w,i=t.offsetHeight-l.h),8==e("ie")&&!e("quirks")){var h,g=t.parentNode,y=n.toPixelValue;g&&(h=n.getComputedStyle(g),d-=h.borderLeftStyle!=u?y(t,h.borderLeftWidth):0,p-=h.borderTopStyle!=u?y(t,h.borderTopWidth):0)}return{l:d,t:p,w:c-f.w,h:i-f.h}},s.setContentSize=function(e,t,n){e=r.byId(e);var i=t.w,u=t.h;if(a(e)){var c=s.getPadBorderExtents(e,n);i>=0&&(i+=c.w),u>=0&&(u+=c.h)}o(e,NaN,NaN,i,u)};var c={l:0,t:0,w:0,h:0};return s.setMarginBox=function(t,u,f){t=r.byId(t);var l=f||n.getComputedStyle(t),d=u.w,p=u.h,h=a(t)?c:s.getPadBorderExtents(t,l),g=s.getMarginExtents(t,l);if(e("webkit")&&i(t)){var y=t.style;d>=0&&!y.width&&(y.width="4px"),p>=0&&!y.height&&(y.height="4px")}d>=0&&(d=Math.max(d-h.w-g.w,0)),p>=0&&(p=Math.max(p-h.h-g.h,0)),o(t,u.l,u.t,d,p)},s.isBodyLtr=function(e){return e=e||t.doc,"ltr"==(t.body(e).dir||e.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(r){r=r||t.doc;var n=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in n?{x:n.pageXOffset,y:n.pageYOffset}:(n=e("quirks")?t.body(r):r.documentElement)&&{x:s.fixIeBiDiScrollLeft(n.scrollLeft||0,r),y:n.scrollTop||0}},s.getIeDocumentElementOffset=function(e){return{x:0,y:0}},s.fixIeBiDiScrollLeft=function(r,n){n=n||t.doc;var o=e("ie");if(o&&!s.isBodyLtr(n)){var i=e("quirks"),a=i?t.body(n):n.documentElement,u=t.global;return 6==o&&!i&&u.frameElement&&a.scrollHeight>a.clientHeight&&(r+=a.clientLeft),o<8||i?r+a.clientWidth-a.scrollWidth:-r}return r},s.position=function(n,o){n=r.byId(n);var i=t.body(n.ownerDocument),a=n.getBoundingClientRect();if(a={x:a.left,y:a.top,w:a.right-a.left,h:a.bottom-a.top},e("ie")<9&&(a.x-=e("quirks")?i.clientLeft+i.offsetLeft:0,a.y-=e("quirks")?i.clientTop+i.offsetTop:0),o){var u=s.docScroll(n.ownerDocument);a.x+=u.x,a.y+=u.y}return a},s.getMarginSize=function(e,t){e=r.byId(e);var o=s.getMarginExtents(e,t||n.getComputedStyle(e)),i=e.getBoundingClientRect();return{w:i.right-i.left+o.w,h:i.bottom-i.top+o.h}},s.normalizeEvent=function(t){if("layerX"in t||(t.layerX=t.offsetX,t.layerY=t.offsetY),!("pageX"in t)){var r=t.target,n=r&&r.ownerDocument||document,o=e("quirks")?n.body:n.documentElement;t.pageX=t.clientX+s.fixIeBiDiScrollLeft(o.scrollLeft||0,n),t.pageY=t.clientY+(o.scrollTop||0)}},s}),define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(e,t,r,n){if(t._fixEvent){var o=t._fixEvent;t._fixEvent=function(e,t){return e=o(e,t),e&&n.normalizeEvent(e),e}}var i={fix:function(e,r){return t._fixEvent?t._fixEvent(e,r):e},stop:function(e){r("dom-addeventlistener")||e&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e=e||window.event,e.cancelBubble=!0,t._preventDefault.call(e))}};return r("extend-dojo")&&(e.fixEvent=i.fix,e.stopEvent=i.stop),i}),define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(e,t,r,n,o){function i(e,r){var o=function(o,i){return t(o,e,function(e){return r?r(e,i):n.isDescendant(e.relatedTarget,o)?void 0:i.call(this,e)})};return o.bubble=function(t){return i(e,function(e,r){var n=t(e.target),o=e.relatedTarget;if(n&&n!=(o&&1==o.nodeType&&t(o)))return r.call(n,e)})},o}r.add("dom-quirks",o.doc&&"BackCompat"==o.doc.compatMode),r.add("events-mouseenter",o.doc&&"onmouseenter"in o.doc.createElement("div")),r.add("events-mousewheel",o.doc&&"onmousewheel"in o.doc);var a;a=r("dom-quirks")&&r("ie")||!r("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,t){return e.button&t},isLeft:function(e){return 1&e.button},isMiddle:function(e){return 4&e.button},isRight:function(e){return 2&e.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}},e.mouseButtons=a;var s;return s=r("events-mousewheel")?"mousewheel":function(e,r){return t(e,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail,r.call(this,e)})},{_eventHandler:i,enter:i("mouseover"),leave:i("mouseout"),wheel:s,isLeft:a.isLeft,isMiddle:a.isMiddle,isRight:a.isRight}}),define("dojo/_base/sniff",["./kernel","./lang","../sniff"],function(e,t,r){return r("host-browser")?(e._name="browser",t.mixin(e,{isBrowser:!0,isFF:r("ff"),isIE:r("ie"),isKhtml:r("khtml"),isWebKit:r("webkit"),isMozilla:r("mozilla"),isMoz:r("mozilla"),isOpera:r("opera"),isSafari:r("safari"),isChrome:r("chrome"),isMac:r("mac"),isIos:r("ios"),isAndroid:r("android"),isWii:r("wii"),isQuirks:r("quirks"),isAir:r("air")}),r):r}),define("dojo/keys",["./_base/kernel","./sniff"],function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}}),define("dojo/_base/connect",["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(e,t,r,n,o,i,a,s){function u(r,o,a,u,c){if(u=s.hitch(a,u),!r||!r.addEventListener&&!r.attachEvent)return n.after(r||e.global,o,u,!0);if("string"==typeof o&&"on"==o.substring(0,2)&&(o=o.substring(2)),r||(r=e.global),!c)switch(o){case"keypress":o=f;break;case"mouseenter":o=i.enter;break;case"mouseleave":o=i.leave}return t(r,o,u,c)}function c(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}a.add("events-keypress-typed",function(){var e={charCode:0};try{e=document.createEvent("KeyboardEvent"),(e.initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(e){}return 0==e.charCode&&!a("opera")});var f,l={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},d=a("mac")?"metaKey":"ctrlKey",p=function(e,t){var r=s.mixin({},e,t);return c(r),r.preventDefault=function(){e.preventDefault()},r.stopPropagation=function(){e.stopPropagation()},r};if(a("events-keypress-typed")){var h=function(e,t){try{return e.keyCode=t}catch(e){return 0}};f=function(e,r){var n=t(e,"keydown",function(e){var t=e.keyCode,n=13!=t&&32!=t&&(27!=t||!a("ie"))&&(t<48||t>90)&&(t<96||t>111)&&(t<186||t>192)&&(t<219||t>222)&&229!=t;if(n||e.ctrlKey){var o=n?0:t;if(e.ctrlKey){if(3==t||13==t)return r.call(e.currentTarget,e);o>95&&o<106?o-=48:!e.shiftKey&&o>=65&&o<=90?o+=32:o=l[o]||o}var i=p(e,{type:"keypress",faux:!0,charCode:o});r.call(e.currentTarget,i),a("ie")&&h(e,i.keyCode)}}),o=t(e,"keypress",function(e){var t=e.charCode;return t=t>=32?t:0,e=p(e,{charCode:t,faux:!0}),r.call(this,e)});return{remove:function(){n.remove(),o.remove()}}}}else f=a("opera")?function(e,r){return t(e,"keypress",function(e){var t=e.which;return 3==t&&(t=99),t=t<32&&!e.shiftKey?0:t,e.ctrlKey&&!e.shiftKey&&t>=65&&t<=90&&(t+=32),r.call(this,p(e,{charCode:t}))})}:function(e,r){return t(e,"keypress",function(e){return c(e),r.call(this,e)})};var g={_keypress:f,connect:function(e,t,r,n,o){var i=arguments,a=[],s=0;a.push("string"==typeof i[0]?null:i[s++],i[s++]);var c=i[s+1];a.push("string"==typeof c||"function"==typeof c?i[s++]:null,i[s++]);for(var f=i.length;s<f;s++)a.push(i[s]);return u.apply(this,a)},disconnect:function(e){e&&e.remove()},subscribe:function(e,t,n){return r.subscribe(e,s.hitch(t,n))},publish:function(e,t){return r.publish.apply(r,[e].concat(t))},connectPublisher:function(e,t,r){var n=function(){g.publish(e,arguments)};return r?g.connect(t,r,n):g.connect(t,n)},isCopyKey:function(e){return e[d]}};return g.unsubscribe=g.disconnect,a("extend-dojo")&&s.mixin(e,g),g}),define("dojo/dom-prop",["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(e,t,r,n,o,i,a,s){function u(e){for(var t,r="",n=e.childNodes,o=0;t=n[o];o++)8!=t.nodeType&&(r+=1==t.nodeType?u(t):t.nodeValue);return r}var c={},f=1,l=t._scopeName+"attrid";
r.add("dom-textContent",function(e,t,r){return"textContent"in r}),e.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"},e.get=function(t,n){t=o.byId(t);var i=n.toLowerCase(),a=e.names[i]||n;return"textContent"!=a||r("dom-textContent")?t[a]:u(t)},e.set=function(t,u,d){t=o.byId(t);var p=arguments.length;if(2==p&&"string"!=typeof u){for(var h in u)e.set(t,h,u[h]);return t}var g=u.toLowerCase(),y=e.names[g]||u;if("style"==y&&"string"!=typeof d)return i.set(t,d),t;if("innerHTML"==y)return r("ie")&&t.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(a.empty(t),t.appendChild(a.toDom(d,t.ownerDocument))):t[y]=d,t;if("textContent"==y&&!r("dom-textContent"))return a.empty(t),t.appendChild(t.ownerDocument.createTextNode(d)),t;if(n.isFunction(d)){var m=t[l];m||(m=f++,t[l]=m),c[m]||(c[m]={});var v=c[m][y];if(v)s.disconnect(v);else try{delete t[y]}catch(e){}return d?c[m][y]=s.connect(t,y,d):t[y]=null,t}return t[y]=d,t}}),define("dojo/dom-attr",["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(e,t,r,n,o,i){function a(e,t){var r=e.getAttributeNode&&e.getAttributeNode(t);return!!r&&r.specified}var s={innerHTML:1,textContent:1,className:1,htmlFor:t("ie"),value:1},u={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(e,t){var r=t.toLowerCase();return s[i.names[r]||t]||a(n.byId(e),u[r]||t)},e.get=function(e,t){e=n.byId(e);var o=t.toLowerCase(),c=i.names[o]||t,f=s[c],l=e[c];if(f&&"undefined"!=typeof l)return l;if("textContent"==c)return i.get(e,c);if("href"!=c&&("boolean"==typeof l||r.isFunction(l)))return l;var d=u[o]||t;return a(e,d)?e.getAttribute(d):null},e.set=function(t,a,c){if(t=n.byId(t),2==arguments.length){for(var f in a)e.set(t,f,a[f]);return t}var l=a.toLowerCase(),d=i.names[l]||a,p=s[d];return"style"==d&&"string"!=typeof c?(o.set(t,c),t):p||"boolean"==typeof c||r.isFunction(c)?i.set(t,a,c):(t.setAttribute(u[l]||a,c),t)},e.remove=function(e,t){n.byId(e).removeAttribute(u[t.toLowerCase()]||t)},e.getNodeProp=function(e,t){e=n.byId(e);var r=t.toLowerCase(),o=i.names[r]||t;if(o in e&&"href"!=o)return e[o];var s=u[r]||t;return a(e,s)?e.getAttribute(s):null}}),define("dojo/dom-construct",["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(e,t,r,n,o,i){function a(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)}function s(e,t){var r=t.parentNode;r&&(r.lastChild==t?r.appendChild(e):r.insertBefore(e,t.nextSibling))}function u(e){if("innerHTML"in e)try{return void(e.innerHTML="")}catch(e){}for(var t;t=e.lastChild;)e.removeChild(t)}function c(e,t){e.firstChild&&u(e),t&&(r("ie")&&t.canHaveChildren&&"removeNode"in e?e.removeNode(!1):t.removeChild(e))}var f={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},l=/<\s*([\w\:]+)/,d={},p=0,h="__"+t._scopeName+"ToDomId";for(var g in f)if(f.hasOwnProperty(g)){var y=f[g];y.pre="option"==g?'<select multiple="multiple">':"<"+y.join("><")+">",y.post="</"+y.reverse().join("></")+">"}var m;r("ie")<=8&&(m=function(e){e.__dojo_html5_tested="yes";var t=v("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},e.body);1!==t.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(t){e.createElement(t)}),_(t)}),e.toDom=function(e,t){t=t||n.doc;var o=t[h];o||(t[h]=o=++p+"",d[o]=t.createElement("div")),r("ie")<=8&&!t.__dojo_html5_tested&&t.body&&m(t),e+="";var i,a,s,u,c=e.match(l),g=c?c[1].toLowerCase():"",y=d[o];if(c&&f[g])for(i=f[g],y.innerHTML=i.pre+e+i.post,a=i.length;a;--a)y=y.firstChild;else y.innerHTML=e;if(1==y.childNodes.length)return y.removeChild(y.firstChild);for(u=t.createDocumentFragment();s=y.firstChild;)u.appendChild(s);return u},e.place=function(t,r,n){if(r=o.byId(r),"string"==typeof t&&(t=/^\s*</.test(t)?e.toDom(t,r.ownerDocument):o.byId(t)),"number"==typeof n){var i=r.childNodes;!i.length||i.length<=n?r.appendChild(t):a(t,i[n<0?0:n])}else switch(n){case"before":a(t,r);break;case"after":s(t,r);break;case"replace":r.parentNode.replaceChild(t,r);break;case"only":e.empty(r),r.appendChild(t);break;case"first":if(r.firstChild){a(t,r.firstChild);break}default:r.appendChild(t)}return t};var v=e.create=function(t,r,a,s){var u=n.doc;return a&&(a=o.byId(a),u=a.ownerDocument),"string"==typeof t&&(t=u.createElement(t)),r&&i.set(t,r),a&&e.place(t,a,s),t};e.empty=function(e){u(o.byId(e))};var _=e.destroy=function(e){e=o.byId(e),e&&c(e,e.parentNode)}}),define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(e,t,r){function n(e){if("string"==typeof e||e instanceof String){if(e&&!a.test(e))return s[0]=e,s;var r=e.split(a);return r.length&&!r[0]&&r.shift(),r.length&&!r[r.length-1]&&r.pop(),r}return e?t.filter(e,function(e){return e}):[]}var o,i="className",a=/\s+/,s=[""],u={};return o={contains:function(e,t){return(" "+r.byId(e)[i]+" ").indexOf(" "+t+" ")>=0},add:function(e,t){e=r.byId(e),t=n(t);var o,a=e[i];a=a?" "+a+" ":" ",o=a.length;for(var s,u=0,c=t.length;u<c;++u)s=t[u],s&&a.indexOf(" "+s+" ")<0&&(a+=s+" ");o<a.length&&(e[i]=a.substr(1,a.length-2))},remove:function(t,o){t=r.byId(t);var a;if(void 0!==o){o=n(o),a=" "+t[i]+" ";for(var s=0,u=o.length;s<u;++s)a=a.replace(" "+o[s]+" "," ");a=e.trim(a)}else a="";t[i]!=a&&(t[i]=a)},replace:function(e,t,n){e=r.byId(e),u[i]=e[i],o.remove(u,n),o.add(u,t),e[i]!==u[i]&&(e[i]=u[i])},toggle:function(e,t,i){if(e=r.byId(e),void 0===i){t=n(t);for(var a,s=0,u=t.length;s<u;++s)a=t[s],o[o.contains(e,a)?"remove":"add"](e,a)}else o[i?"add":"remove"](e,t);return i}}}),define("dojo/NodeList-dom",["./_base/kernel","./query","./_base/array","./_base/lang","./dom-class","./dom-construct","./dom-geometry","./dom-attr","./dom-style"],function(e,t,r,n,o,i,a,s,u){function c(e){return function(t,r,n){return 2==arguments.length?e["string"==typeof r?"get":"set"](t,r):e.set(t,r,n)}}var f=function(e){return 1==e.length&&"string"==typeof e[0]},l=function(e){var t=e.parentNode;t&&t.removeChild(e)},d=t.NodeList,p=d._adaptWithCondition,h=d._adaptAsForEach,g=d._adaptAsMap;return n.extend(d,{_normalize:function(t,r){var o=t.parse===!0;if("string"==typeof t.template){var a=t.templateFunc||e.string&&e.string.substitute;t=a?a(t.template,t):t}var s=typeof t;return"string"==s||"number"==s?(t=i.toDom(t,r&&r.ownerDocument),t=11==t.nodeType?n._toArray(t.childNodes):[t]):n.isArrayLike(t)?n.isArray(t)||(t=n._toArray(t)):t=[t],o&&(t._runParse=!0),t},_cloneNode:function(e){return e.cloneNode(!0)},_place:function(t,r,n,o){if(1==r.nodeType||"only"!=n)for(var a,s=r,u=t.length,c=u-1;c>=0;c--){var f=o?this._cloneNode(t[c]):t[c];if(t._runParse&&e.parser&&e.parser.parse)for(a||(a=s.ownerDocument.createElement("div")),a.appendChild(f),e.parser.parse(a),f=a.firstChild;a.firstChild;)a.removeChild(a.firstChild);c==u-1?i.place(f,s,n):s.parentNode.insertBefore(f,s),s=f}},position:g(a.position),attr:p(c(s),f),style:p(c(u),f),addClass:h(o.add),removeClass:h(o.remove),toggleClass:h(o.toggle),replaceClass:h(o.replace),empty:h(i.empty),removeAttr:h(s.remove),marginBox:g(a.getMarginBox),place:function(e,r){var n=t(e)[0];return this.forEach(function(e){i.place(e,n,r)})},orphan:function(e){return(e?t._filterResult(this,e):this).forEach(l)},adopt:function(e,r){return t(e).place(this[0],r)._stash(this)},query:function(e){if(!e)return this;var r=new d;return this.map(function(n){t(e,n).forEach(function(e){void 0!==e&&r.push(e)})}),r._stash(this)},filter:function(e){var n=arguments,o=this,i=0;if("string"==typeof e){if(o=t._filterResult(this,n[0]),1==n.length)return o._stash(this);i=1}return this._wrap(r.filter(o,n[i],n[i+1]),this)},addContent:function(e,t){e=this._normalize(e,this[0]);for(var r,n=0;r=this[n];n++)e.length?this._place(e,r,t,n>0):i.empty(r);return this}}),d}),define("dojo/request/iframe",["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window","../NodeList-dom"],function(e,t,r,n,o,i,a,s,u,c,f,l){function d(e,r,n){if(l.global[e])return l.global[e];if(l.global.frames[e])return l.global.frames[e];n||(u("config-useXDomain")&&!u("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),n=u("config-dojoBlankHtmlUrl")||t.toUrl("dojo/resources/blank.html"));var o=f.place('<iframe id="'+e+'" name="'+e+'" src="'+n+'" onload="'+r+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',l.body());return l.global[e]=o,o}function p(e,t,r){var n=l.global.frames[e.name];n.contentWindow&&(n=n.contentWindow);try{r?n.location.replace(t):n.location=t}catch(e){console.log("dojo/request/iframe.setSrc: ",e)}}function h(e){if(e.contentDocument)return e.contentDocument;var t=e.name;if(t){var r=l.doc.getElementsByTagName("iframe");if(e.document&&r[t].contentWindow&&r[t].contentWindow.document)return r[t].contentWindow.document;if(l.doc.frames[t]&&l.doc.frames[t].document)return l.doc.frames[t].document}return null}function g(){return f.create("form",{name:R+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},l.body())}function y(){var e;try{if(E._currentDfd||!E._dfdQueue.length)return;do e=E._currentDfd=E._dfdQueue.shift();while(e&&(e.canceled||e.isCanceled&&e.isCanceled())&&E._dfdQueue.length);if(!e||e.canceled||e.isCanceled&&e.isCanceled())return void(E._currentDfd=null);var t,r=e.response,o=r.options,s=e._contentToClean=[],u=c.byId(o.form),d=n.notify,p=o.data||null;if(e._legacy||"POST"!==o.method||u?"GET"===o.method&&u&&r.url.indexOf("?")>-1&&(t=r.url.slice(r.url.indexOf("?")+1),p=i.mixin(a.queryToObject(t),p)):u=e._tmpForm=g(),u){if(!e._legacy){var h=u;do h=h.parentNode;while(h&&h!==l.doc.documentElement);h||(u.style.position="absolute",u.style.left="-1000px",u.style.top="-1000px",l.body().appendChild(u)),u.name||(u.name=R+"_form")}if(p){var y=function(e,t){f.create("input",{type:"hidden",name:e,value:t},u),s.push(e)};for(var m in p){var v=p[m];if(i.isArray(v)&&v.length>1)for(var _=0;_<v.length;_++)y(m,v[_]);else u[m]?u[m].value=v:y(m,v)}}var b=u.getAttributeNode("action"),w=u.getAttributeNode("method"),x=u.getAttributeNode("target");r.url&&(e._originalAction=b?b.value:null,b?b.value=r.url:u.setAttribute("action",r.url)),e._legacy?w&&w.value||(w?w.value=o.method:u.setAttribute("method",o.method)):(e._originalMethod=w?w.value:null,w?w.value=o.method:u.setAttribute("method",o.method)),e._originalTarget=x?x.value:null,x?x.value=E._iframeName:u.setAttribute("target",E._iframeName),u.target=E._iframeName,d&&d.emit("send",r,e.promise.cancel),E._notifyStart(r),u.submit()}else{var I="";r.options.data&&(I=r.options.data,"string"!=typeof I&&(I=a.objectToQuery(I)));var T=r.url+(r.url.indexOf("?")>-1?"&":"?")+I;d&&d.emit("send",r,e.promise.cancel),E._notifyStart(r),E.setSrc(E._frame,T,!0)}}catch(t){e.reject(t)}}function m(e){return!this.isFulfilled()}function v(e){return!!this._finished}function _(e,t){if(!t)try{var r=e.options,n=E.doc(E._frame),a=r.handleAs;if("html"!==a){if("xml"===a)if("html"===n.documentElement.tagName.toLowerCase()){s("a",n.documentElement).orphan();var u=n.documentElement.innerText||n.documentElement.textContent;u=u.replace(/>\s+</g,"><"),e.text=i.trim(u)}else e.data=n;else e.text=n.getElementsByTagName("textarea")[0].value;o(e)}else e.data=n}catch(e){t=e}t?this.reject(t):this._finished?this.resolve(e):this.reject(new Error("Invalid dojo/request/iframe request state"))}function b(e){this._callNext()}function E(e,t,o){var i=n.parseArgs(e,n.deepCreate(x,t),!0);if(e=i.url,t=i.options,"GET"!==t.method&&"POST"!==t.method)throw new Error(t.method+" not supported by dojo/request/iframe");E._frame||(E._frame=E.create(E._iframeName,w+"();"));var a=n.deferred(i,null,m,v,_,b);return a._callNext=function(){this._calledNext||(this._calledNext=!0,E._currentDfd=null,E._fireNextRequest())},a._legacy=o,E._dfdQueue.push(a),E._fireNextRequest(),r(a),o?a:a.promise}var R=e.id.replace(/[\/\.\-]/g,"_"),w=R+"_onload";l.global[w]||(l.global[w]=function(){var e=E._currentDfd;if(!e)return void E._fireNextRequest();var t=e.response,r=t.options,n=c.byId(r.form)||e._tmpForm;if(n){for(var o=e._contentToClean,i=0;i<o.length;i++)for(var a=o[i],s=0;s<n.childNodes.length;s++){var u=n.childNodes[s];if(u.name===a){f.destroy(u);break}}e._originalAction&&n.setAttribute("action",e._originalAction),e._originalMethod&&(n.setAttribute("method",e._originalMethod),n.method=e._originalMethod),e._originalTarget&&(n.setAttribute("target",e._originalTarget),n.target=e._originalTarget)}e._tmpForm&&(f.destroy(e._tmpForm),delete e._tmpForm),e._finished=!0});var x={method:"POST"};return E.create=d,E.doc=h,E.setSrc=p,E._iframeName=R+"_IoIframe",E._notifyStart=function(){},E._dfdQueue=[],E._currentDfd=null,E._fireNextRequest=y,n.addCommonMethods(E,["GET","POST"]),E}),define("dojo/request/script",["module","./watch","./util","../_base/kernel","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(module,watch,util,kernel,array,lang,on,dom,domConstruct,has,win){function attach(e,t,r){var n=r||win.doc,o=n.createElement("script");return o.type="text/javascript",o.src=t,o.id=e,o.async=!0,o.charset="utf-8",n.getElementsByTagName("head")[0].appendChild(o)}function remove(e,t,r){domConstruct.destroy(dom.byId(e,t)),callbacks[e]&&(r?callbacks[e]=function(){delete callbacks[e]}:delete callbacks[e])}function _addDeadScript(e){var t=e.response.options,r=t.ioArgs?t.ioArgs.frameDoc:t.frameDoc;deadScripts.push({id:e.id,frameDoc:r}),t.ioArgs&&(t.ioArgs.frameDoc=null),t.frameDoc=null}function canceler(e,t){e.canDelete&&script._remove(e.id,t.options.frameDoc,!0)}function isValid(e){return deadScripts&&deadScripts.length&&(array.forEach(deadScripts,function(e){script._remove(e.id,e.frameDoc),e.frameDoc=null}),deadScripts=[]),!e.options.jsonp||!e.data}function isReadyScript(e){return!!this.scriptLoaded}function isReadyCheckString(response){var checkString=response.options.checkString;return checkString&&eval("typeof("+checkString+') !== "undefined"')}function handleResponse(e,t){this.canDelete&&_addDeadScript(this),t?this.reject(t):this.resolve(e)}function script(e,t,r){var n=util.parseArgs(e,util.deepCopy({},t));e=n.url,t=n.options;var o=util.deferred(n,canceler,isValid,t.jsonp?null:t.checkString?isReadyCheckString:isReadyScript,handleResponse);if(lang.mixin(o,{id:mid+counter++,canDelete:!1}),t.jsonp){var i=new RegExp("[?&]"+t.jsonp+"=");i.test(e)||(e+=(~e.indexOf("?")?"&":"?")+t.jsonp+"="+(t.frameDoc?"parent.":"")+mid+"_callbacks."+o.id),o.canDelete=!0,callbacks[o.id]=function(e){n.data=e,o.handleResponse(n)}}if(util.notify&&util.notify.emit("send",n,o.promise.cancel),!t.canAttach||t.canAttach(o)){var a=script._attach(o.id,e,t.frameDoc);if(!t.jsonp&&!t.checkString)var s=on(a,loadEvent,function(e){("load"===e.type||readyRegExp.test(a.readyState))&&(s.remove(),o.scriptLoaded=e)})}return on.once(a,"error",function(e){o.reject(e),script._remove(o.id,t.frameDoc,!0)}),watch(o),r?o:o.promise}has.add("script-readystatechange",function(e,t){var r=t.createElement("script");return"undefined"!=typeof r.onreadystatechange&&("undefined"==typeof e.opera||"[object Opera]"!==e.opera.toString())});var mid=module.id.replace(/[\/\.\-]/g,"_"),counter=0,loadEvent=has("script-readystatechange")?"readystatechange":"load",readyRegExp=/complete|loaded/,callbacks=kernel.global[mid+"_callbacks"]={},deadScripts=[];return script.get=script,script._attach=attach,script._remove=remove,script._callbacksProperty=mid+"_callbacks",script}),define("dojo/when",["./Deferred","./promise/Promise"],function(e,t){"use strict";return function(r,n,o,i){var a=r&&"function"==typeof r.then,s=a&&r instanceof t;if(!a)return arguments.length>1?n?n(r):r:(new e).resolve(r);if(!s){var u=new e(r.cancel);r.then(u.resolve,u.reject,u.progress),r=u.promise}return n||o||i?r.then(n,o,i):r}}),define("dojo/promise/all",["../_base/array","../Deferred","../when"],function(e,t,r){"use strict";var n=e.some;return function(e){var o,i;e instanceof Array?i=e:e&&"object"==typeof e&&(o=e);var a,s=[];if(o){i=[];for(var u in o)Object.hasOwnProperty.call(o,u)&&(s.push(u),i.push(o[u]));a={}}else i&&(a=[]);if(!i||!i.length)return(new t).resolve(a);var c=new t;c.promise.always(function(){a=s=null});var f=i.length;return n(i,function(e,t){return o||s.push(t),r(e,function(e){c.isFulfilled()||(a[s[t]]=e,0===--f&&c.resolve(a))},c.reject),c.isFulfilled()}),c.promise}}),require.config({baseUrl:"../libs",paths:{store:"..",requireLib:"requirejs/require",md5:"md5/js/md5.min",config:"../config",tests:"../tests"},map:{"store/rest":{"dojo/request":"dojo/request/xhr","dojo/request/iframe":"dojo/request/iframe","dojo/request/script":"dojo/request/script"}},deps:["store/EntryStore","dojo/_base/window","dojo/request/xhr","dojo/request/iframe","dojo/request/script","dojo/promise/all"]}),define("all",function(){});